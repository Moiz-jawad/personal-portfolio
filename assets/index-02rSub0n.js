const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TechStack-B_2WPTzA.js","assets/r3f-Bp7huGo4.js","assets/three-DWpvEC_A.js","assets/animations-DDlvirwQ.js","assets/TitleHeader-Dsp1v96D.js","assets/ShowcaseSection-CZ741qfX.js","assets/LogoSection-D8_bQN3u.js","assets/FeatureCards-DAqLeaJ7.js","assets/ExperienceSection-C60U9O6A.js","assets/Contact-DEkBZbjP.js"])))=>i.map(i=>d[i]);
import{r as _,j as d,g as pn,u as di,a as gn,e as fa,R as mn,b as vn,c as pa,S as ga,C as ma,O as va,_ as Dr,d as xa}from"./r3f-Bp7huGo4.js";import{h as Me,U as Kt,c as Pe,aT as _a,aU as ba,aV as Sa,aK as ya,aE as ft,a1 as Rs,aW as Ta,e as Us,a2 as Pr,aA as Ea,aX as It,aY as hi,L as xn,aZ as _n,a_ as bn,a$ as Qs,b0 as Sn,S as Mi,O as wa,M as Ma,b1 as ns,D as as,n as Nt,au as Pa,aN as Qt,b2 as L,a7 as yn,aq as Tn,j as En,P as wn,b3 as Ra,b4 as Pi,b5 as Mn,ac as Da,X as Ri,b6 as Ca,b7 as Ba,b8 as Aa,b9 as Ua,ba as Di,az as ka,N as Ia,bb as xr,a9 as Na,bc as Oa}from"./three-DWpvEC_A.js";import{g as Jr}from"./animations-DDlvirwQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();const za=[{name:"Work",link:"#work"},{name:"Experience",link:"#experience"},{name:"Skills",link:"#skills"}],Fa=[{text:"Ideas",imgPath:"/images/ideas.svg"},{text:"Concepts",imgPath:"/images/concepts.svg"},{text:"Designs",imgPath:"/images/designs.svg"},{text:"Code",imgPath:"/images/code.svg"},{text:"Ideas",imgPath:"/images/ideas.svg"},{text:"Concepts",imgPath:"/images/concepts.svg"},{text:"Designs",imgPath:"/images/designs.svg"},{text:"Code",imgPath:"/images/code.svg"}],Ci=[{value:1,suffix:"+",label:"Years of Experience"},{value:"N/A",suffix:"",label:"Satisfied Clients"},{value:18,suffix:"+",label:"Completed Projects"},{value:"N/A",suffix:"",label:"Client Retention Rate"}],Mc=[{imgPath:"https://img.icons8.com/color/80/flutter.png"},{imgPath:"https://img.icons8.com/color/80/nodejs.png"},{imgPath:"https://img.icons8.com/officel/80/react.png"},{imgPath:"https://img.icons8.com/color/96/google-firebase-console.png"},{imgPath:"https://img.icons8.com/fluency/96/visual-studio-code-2019.png"},{imgPath:"https://img.icons8.com/3d-fluency/94/github-logo.png"},{imgPath:"https://img.icons8.com/external-tal-revivo-color-tal-revivo/48/external-mongodb-a-cross-platform-document-oriented-database-program-logo-color-tal-revivo.png"},{imgPath:"https://img.icons8.com/color/96/html-5--v1.png"},{imgPath:"https://img.icons8.com/color/96/tailwindcss.png"},{imgPath:"https://img.icons8.com/color/96/javascript--v1.png"}],Pc=[{imgPath:"https://img.icons8.com/nolan/64/design.png",title:"Robust Architecture",desc:"Designing scalable backend systems and clean frontend components with modern frameworks."},{imgPath:"https://img.icons8.com/color/48/api.png",title:"Secure APIs",desc:"Implementing JWT authentication, validation, and error handling for reliable communication between client and server."},{imgPath:"https://img.icons8.com/pulsar-gradient/48/spaceship-launch-documentation.png",title:"Efficient Deployment",desc:"Delivering production-ready apps with optimized performance, CI/CD pipelines, and on-time releases."},{imgPath:"https://img.icons8.com/color/48/web-design.png",title:"User-Centric Design",desc:"Crafting responsive, accessible, and polished interfaces with React and modern UI libraries."},{imgPath:"https://img.icons8.com/nolan/64/database.png",title:"Database Mastery",desc:"Building reliable schemas, optimizing queries, and integrating SQL/NoSQL solutions for performance and scalability."},{imgPath:"https://img.icons8.com/fluency/48/security-configuration.png",title:"Best-Practice Security",desc:"Applying password hashing, rate limiting, and secure coding standards to protect applications end-to-end."}],Rc=[{name:"React Developer",modelPath:"/models/react_logo_circle.glb",scale:1,rotation:[0,0,0]},{name:"Flutter Developer",modelPath:"/models/Flutter.glb",scale:30,rotation:[0,0,0]},{name:"Backend Developer",modelPath:"/models/node-transformed.glb",scale:5,rotation:[0,-Math.PI/2,0]},{name:"Interactive Developer",modelPath:"/models/three.js-transformed.glb",scale:.05,rotation:[0,0,0]},{name:"Project Manager",modelPath:"/models/git-svg-transformed.glb",scale:.05,rotation:[0,-Math.PI/4,0]}],Dc=[{review:"Moiz’s contributions to web applications have been outstanding. He approaches challenges with a problem-solving mindset.",imgPath:"https://img.icons8.com/officel/80/react.png",logoPath:"https://img.icons8.com/officel/80/react.png",title:"Full Stack Developer",date:"Oct 2025 - Present",responsibilities:["Led the development of Docker's web applications, focusing on scalability.","Worked with backend engineers to integrate APIs seamlessly with the frontend.","Contributed to open-source projects that were used with the Docker ecosystem."]},{review:"Moiz’s work on Appwrite’s mobile app brought a high level of quality and efficiency. He delivered solutions that enhanced our mobile experience & meet our product goals.",imgPath:"https://img.icons8.com/color/80/nodejs.png",logoPath:"https://img.icons8.com/color/80/nodejs.png",title:"Backend Developer",date:"Oct 2025 - Nov 2025",responsibilities:["Built cross-platform mobile apps using React Native, integrating with Appwrite's backend services.","Improved app performance and user experience through code optimization and testing.","Coordinated with the product team to implement features based on feedback."]},{review:"Moiz brought creativity and technical expertise to the team, significantly improving our frontend performance. His work has been invaluable in delivering faster experiences.",imgPath:"https://img.icons8.com/color/80/flutter.png",logoPath:"https://img.icons8.com/color/80/flutter.png",title:"Flutter Developer",date:"July 2025 - Sept 2025",responsibilities:[`Built multiple Flutter apps (Quiz App, Task Manager, AdMob,
      Monetization App, Authentication System, Highway Incident
      Detection App, and Social Learning App) within weekly
      deadlines, integrating Firebase Auth, Firestore, Supabase
      SharedPreferences, AdMob, and MVVM architecture.`,`Applied state management, form validation, and animated UI/UX
      transitions to deliver polished, production-ready applications
      with real-world monetization and scalable features.`]}],Ha=[{name:"insta",imgPath:"/images/insta.png",link:"https://www.instagram.com"},{name:"fb",imgPath:"/images/fb.png",link:"https://www.facebook.com"},{name:"github",imgPath:"https://img.icons8.com/3d-fluency/94/github-logo.png",link:"https://www.github.com"},{name:"linkedin",imgPath:"/images/linkedin.png",link:"https://www.linkedin.com"}],Pn=_.memo(()=>{const[e,t]=_.useState(!1);return _.useEffect(()=>{const r=()=>{const s=window.scrollY>10;t(s)};return window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r)},[]),d.jsx("header",{className:`navbar ${e?"scrolled":"not-scrolled"}`,children:d.jsxs("div",{className:"inner",children:[d.jsx("a",{className:"logo",href:"#hero",children:"Moiz | Jawad"}),d.jsx("nav",{className:"desktop",children:d.jsx("ul",{children:za.map(({link:r,name:s})=>d.jsx("li",{className:"group",children:d.jsxs("a",{href:r,children:[d.jsx("span",{children:s}),d.jsx("span",{className:"underline"})]})},s))})}),d.jsx("a",{href:"#contact",className:"contact-btn group",children:d.jsx("div",{className:"inner",children:d.jsx("span",{children:"Contact me"})})})]})})});Pn.displayName="Navbar";const Rn=_.memo(({className:e,id:t,text:r})=>{const s=i=>{i.preventDefault();const n=document.getElementById("counter");if(n&&t){const a=window.innerHeight*.15,o=n.getBoundingClientRect().top+window.pageYOffset-a;window.scrollTo({top:o,behavior:"smooth"})}};return d.jsx("a",{onClick:s,className:`${e??""} cta-wrapper`,href:"#counter","aria-label":r,children:d.jsxs("div",{className:"cta-button group",children:[d.jsx("div",{className:"bg-circle"}),d.jsx("p",{className:"text",children:r}),d.jsx("div",{className:"arrow-wrapper",children:d.jsx("img",{src:"/images/arrow-down.svg",alt:"arrow",width:20,height:20,loading:"lazy",decoding:"async"})})]})})});Rn.displayName="Button";var os={},Bi;function La(){if(Bi)return os;Bi=1,os.match=n,os.parse=a;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,r=/^(?:(min|max)-)?(.+)/,s=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function n(v,p){return a(v).some(function(g){var u=g.inverse,m=g.type==="all"||p.type===g.type;if(m&&u||!(m||u))return!1;var B=g.expressions.every(function(C){var R=C.feature,E=C.modifier,b=C.value,y=p[R];if(!y)return!1;switch(R){case"orientation":case"scan":return y.toLowerCase()===b.toLowerCase();case"width":case"height":case"device-width":case"device-height":b=f(b),y=f(y);break;case"resolution":b=c(b),y=c(y);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":b=o(b),y=o(y);break;case"grid":case"color":case"color-index":case"monochrome":b=parseInt(b,10)||1,y=parseInt(y,10)||0;break}switch(E){case"min":return y>=b;case"max":return y<=b;default:return y===b}});return B&&!u||!B&&u})}function a(v){return v.split(",").map(function(p){p=p.trim();var g=p.match(e),u=g[1],m=g[2],B=g[3]||"",C={};return C.inverse=!!u&&u.toLowerCase()==="not",C.type=m?m.toLowerCase():"all",B=B.match(/\([^\)]+\)/g)||[],C.expressions=B.map(function(R){var E=R.match(t),b=E[1].toLowerCase().match(r);return{modifier:b[1],feature:b[2],value:E[2]}}),C})}function o(v){var p=Number(v),g;return p||(g=v.match(/^(\d+)\s*\/\s*(\d+)$/),p=g[1]/g[2]),p}function c(v){var p=parseFloat(v),g=String(v).match(i)[1];switch(g){case"dpcm":return p/2.54;case"dppx":return p*96;default:return p}}function f(v){var p=parseFloat(v),g=String(v).match(s)[1];switch(g){case"em":return p*16;case"rem":return p*16;case"cm":return p*96/2.54;case"mm":return p*96/2.54/10;case"in":return p*96;case"pt":return p*72;case"pc":return p*72/12;default:return p}}return os}var Os,Ai;function Ga(){if(Ai)return Os;Ai=1;var e=La().match,t=typeof window<"u"?window.matchMedia:null;function r(i,n,a){var o=this,c;t&&!a&&(c=t.call(window,i)),c?(this.matches=c.matches,this.media=c.media,c.addListener(p)):(this.matches=e(i,n),this.media=i),this.addListener=f,this.removeListener=v,this.dispose=g;function f(u){c&&c.addListener(u)}function v(u){c&&c.removeListener(u)}function p(u){o.matches=u.matches,o.media=u.media}function g(){c&&c.removeListener(p)}}function s(i,n,a){return new r(i,n,a)}return Os=s,Os}var ja=Ga();const Va=pn(ja);var Wa=/[A-Z]/g,Xa=/^ms-/,zs={};function Ya(e){return"-"+e.toLowerCase()}function Dn(e){if(zs.hasOwnProperty(e))return zs[e];var t=e.replace(Wa,Ya);return zs[e]=Xa.test(t)?"-"+t:t}function qa(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),s=Object.keys(t),i=r.length;if(s.length!==i)return!1;for(let n=0;n<i;n++){const a=r[n];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var Fs={exports:{}},Hs,Ui;function $a(){if(Ui)return Hs;Ui=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Hs=e,Hs}var Ls,ki;function Ka(){if(ki)return Ls;ki=1;var e=$a();function t(){}function r(){}return r.resetWarningCache=t,Ls=function(){function s(a,o,c,f,v,p){if(p!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function i(){return s}var n={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return n.PropTypes=n,n},Ls}var Ii;function Za(){return Ii||(Ii=1,Fs.exports=Ka()()),Fs.exports}var Qa=Za();const X=pn(Qa),Xe=X.oneOfType([X.string,X.number]),Cn={all:X.bool,grid:X.bool,aural:X.bool,braille:X.bool,handheld:X.bool,print:X.bool,projection:X.bool,screen:X.bool,tty:X.bool,tv:X.bool,embossed:X.bool},Ja={orientation:X.oneOf(["portrait","landscape"]),scan:X.oneOf(["progressive","interlace"]),aspectRatio:X.string,deviceAspectRatio:X.string,height:Xe,deviceHeight:Xe,width:Xe,deviceWidth:Xe,color:X.bool,colorIndex:X.bool,monochrome:X.bool,resolution:Xe,type:Object.keys(Cn)},{type:Cc,...eo}=Ja,to={minAspectRatio:X.string,maxAspectRatio:X.string,minDeviceAspectRatio:X.string,maxDeviceAspectRatio:X.string,minHeight:Xe,maxHeight:Xe,minDeviceHeight:Xe,maxDeviceHeight:Xe,minWidth:Xe,maxWidth:Xe,minDeviceWidth:Xe,maxDeviceWidth:Xe,minColor:X.number,maxColor:X.number,minColorIndex:X.number,maxColorIndex:X.number,minMonochrome:X.number,maxMonochrome:X.number,minResolution:Xe,maxResolution:Xe,...eo},ro={...Cn,...to};var so={all:ro};const io=e=>`not ${e}`,no=(e,t)=>{const r=Dn(e);return typeof t=="number"&&(t=`${t}px`),t===!0?r:t===!1?io(r):`(${r}: ${t})`},ao=e=>e.join(" and "),oo=e=>{const t=[];return Object.keys(so.all).forEach(r=>{const s=e[r];s!=null&&t.push(no(r,s))}),ao(t)},lo=_.createContext(void 0),co=e=>e.query||oo(e),Ni=e=>e?Object.keys(e).reduce((r,s)=>(r[Dn(s)]=e[s],r),{}):void 0,Bn=()=>{const e=_.useRef(!1);return _.useEffect(()=>{e.current=!0},[]),e.current},uo=e=>{const t=_.useContext(lo),r=()=>Ni(e)||Ni(t),[s,i]=_.useState(r);return _.useEffect(()=>{const n=r();qa(s,n)||i(n)},[e,t]),s},ho=e=>{const t=()=>co(e),[r,s]=_.useState(t);return _.useEffect(()=>{const i=t();r!==i&&s(i)},[e]),r},fo=(e,t)=>{const r=()=>Va(e,t||{},!!t),[s,i]=_.useState(r),n=Bn();return _.useEffect(()=>{if(n){const a=r();return i(a),()=>{a&&a.dispose()}}},[e,t]),s},po=e=>{const[t,r]=_.useState(e.matches);return _.useEffect(()=>{const s=i=>{r(i.matches)};return e.addListener(s),r(e.matches),()=>{e.removeListener(s)}},[e]),t},Oi=(e,t,r)=>{const s=uo(t),i=ho(e);if(!i)throw new Error("Invalid or missing MediaQuery!");const n=fo(i,s),a=po(n);return Bn(),_.useEffect(()=>{},[a]),_.useEffect(()=>()=>{n&&n.dispose()},[]),a};var Gs=1/1e3,go=1e3,mo=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*Gs}get fixedDelta(){return this._fixedDelta*Gs}set fixedDelta(e){this._fixedDelta=e*go}get elapsed(){return this._elapsed*Gs}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},vo=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),r=new Da;return r.setAttribute("position",new Ri(e,3)),r.setAttribute("uv",new Ri(t,2)),r})(),Fe=class Js{static get fullscreenGeometry(){return vo}constructor(t="Pass",r=new Mi,s=new wa){this.name=t,this.renderer=null,this.scene=r,this.camera=s,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const r=this.fullscreenMaterial;r!==null&&(r.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let r=this.screen;r!==null?r.material=t:(r=new Ma(Js.fullscreenGeometry,t),r.frustumCulled=!1,this.scene===null&&(this.scene=new Mi),this.scene.add(r),this.screen=r)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,r=It){}render(t,r,s,i,n){throw new Error("Render method not implemented!")}setSize(t,r){}initialize(t,r,s){}dispose(){for(const t of Object.keys(this)){const r=this[t];(r instanceof ft||r instanceof yn||r instanceof Tn||r instanceof Js)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},xo=class extends Fe{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,s,i){const n=e.state.buffers.stencil;n.setLocked(!1),n.setTest(!1)}},_o=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,fi="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",An=class extends Nt{constructor(){super({name:"CopyMaterial",defines:{COLOR_SPACE_CONVERSION:"1",DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new L(null),depthBuffer:new L(null),channelWeights:new L(null),opacity:new L(1)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_o,vertexShader:fi}),this.depthFunc=Mn}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(e){const t=e!==null;this.colorWrite!==t&&(t?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=t,this.needsUpdate=!0),this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){const t=e!==null;this.depthWrite!==t&&(t?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=t,this.depthWrite=t,this.needsUpdate=!0),this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get colorSpaceConversion(){return this.defines.COLOR_SPACE_CONVERSION!==void 0}set colorSpaceConversion(e){this.colorSpaceConversion!==e&&(e?this.defines.COLOR_SPACE_CONVERSION=!0:delete this.defines.COLOR_SPACE_CONVERSION,this.needsUpdate=!0)}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(e){e!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=e):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},bo=class extends Fe{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new An,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ft(1,1,{minFilter:Rs,magFilter:Rs,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,s,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==Kt?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===Pe&&(this.renderTarget.texture.colorSpace=Pe))}},zi=new Us,pi=class extends Fe{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,s,i){const n=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),c=n!==null,f=a>=0;c?(e.getClearColor(zi),e.setClearColor(n,f?a:o)):f&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),c?e.setClearColor(zi,o):f&&e.setClearAlpha(o)}},So=class extends Fe{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new pi(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,s,i){const n=e.getContext(),a=e.state.buffers,o=this.scene,c=this.camera,f=this.clearPass,v=this.inverted?0:1,p=1-v;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),a.stencil.setFunc(n.ALWAYS,v,4294967295),a.stencil.setClear(p),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(e,null):(f.render(e,t),f.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,c)):(e.setRenderTarget(t),e.render(o,c),e.setRenderTarget(r),e.render(o,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(n.EQUAL,1,4294967295),a.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),a.stencil.setLocked(!0)}},yo=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:s=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,i,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new bo,this.depthTexture=null,this.passes=[],this.timer=new mo,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new Me),r=e.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;s===Kt&&e.outputColorSpace===Pe&&(this.inputBuffer.texture.colorSpace=Pe,this.outputBuffer.texture.colorSpace=Pe,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(e,r,s)}}replaceRenderer(e,t=!0){const r=this.renderer,s=r.domElement.parentNode;return this.setRenderer(e),t&&s!==null&&(s.removeChild(r.domElement),s.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new _a;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=ba,e.type=Sa):e.type=ya,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,s){const i=this.renderer,n=i===null?new Me:i.getDrawingBufferSize(new Me),a={minFilter:Rs,magFilter:Rs,stencilBuffer:t,depthBuffer:e,type:r},o=new ft(n.width,n.height,a);return s>0&&(o.samples=s),r===Kt&&i!==null&&i.outputColorSpace===Pe&&(o.texture.colorSpace=Pe),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,s=this.renderer,i=s.getDrawingBufferSize(new Me),n=s.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(s),e.setSize(i.width,i.height),e.initialize(s,n,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(e of r)e.setDepthTexture(o)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const n=(o,c)=>o||c.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let s=this.inputBuffer,i=this.outputBuffer,n=!1,a,o,c;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(t,s,i,e,n),f.needsSwap&&(n&&(r.renderToScreen=f.renderToScreen,a=t.getContext(),o=t.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,s,i,e,n),o.setFunc(a.EQUAL,1,4294967295)),c=s,s=i,i=c),f instanceof So?n=!0:f instanceof xo&&(n=!1))}setSize(e,t,r){const s=this.renderer,i=s.getSize(new Me);(e===void 0||t===void 0)&&(e=i.width,t=i.height),(i.width!==e||i.height!==t)&&s.setSize(e,t,r);const n=s.getDrawingBufferSize(new Me);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height);for(const a of this.passes)a.setSize(n.width,n.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Fe.fullscreenGeometry.dispose()}},qt={NONE:0,DEPTH:1,CONVOLUTION:2},V={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},To=class{constructor(){this.shaderParts=new Map([[V.FRAGMENT_HEAD,null],[V.FRAGMENT_MAIN_UV,null],[V.FRAGMENT_MAIN_IMAGE,null],[V.VERTEX_HEAD,null],[V.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=qt.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=xn}},js=!1,Fi=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case as:r=this.materialsFlatShadedDoubleSide;break;case ns:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case as:r=this.materialsDoubleSide;break;case ns:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof Nt))return e.clone();const t=e.uniforms,r=new Map;for(const i in t){const n=t[i].value;n.isRenderTargetTexture&&(t[i].value=null,r.set(i,n))}const s=e.clone();for(const i of r)t[i[0]].value=i[1],s.uniforms[i[0]].value=i[1];return s}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Pa;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.side=ns,s}),this.materialsDoubleSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.side=as,s}),this.materialsFlatShaded=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s}),this.materialsFlatShadedBackSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s.side=ns,s}),this.materialsFlatShadedDoubleSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s.side=as,s})}}render(e,t,r){const s=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,js){const i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(const n of i)n[0].material=n[1];this.meshCount!==i.size&&i.clear()}else{const i=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=i}e.shadowMap.enabled=s}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return js}static set workaroundEnabled(e){js=e}},Vt=-1,Se=class extends hi{constructor(e,t=Vt,r=Vt,s=1){super(),this.resizable=e,this.baseSize=new Me(1,1),this.preferredSize=new Me(t,r),this.target=this.preferredSize,this.s=s,this.effectiveSize=new Me,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,r=this.effectiveSize,s=this.scale;t.width!==Vt?r.width=t.width:t.height!==Vt?r.width=Math.round(t.height*(e.width/Math.max(e.height,1))):r.width=Math.round(e.width*s),t.height!==Vt?r.height=t.height:t.width!==Vt?r.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r.height=Math.round(e.height*s)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(Vt),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Vt}},Eo=class{constructor(e=0){this.nextId=e}getNextId(){return this.nextId++}reset(e=0){return this.nextId=e,this}},Vs=new Eo(2),wo=class extends Set{constructor(e,t=Vs.getNextId()){super(),this.exclusive=!1,this._layer=t,(this._layer<1||this._layer>31)&&(console.warn("Layer out of range, resetting to 2"),Vs.reset(2),this._layer=Vs.getNextId()),e!==void 0&&this.set(e)}get layer(){return this._layer}set layer(e){const t=this._layer;for(const r of this)r.layers.disable(t),r.layers.enable(e);this._layer=e}getLayer(){return this.layer}setLayer(e){this.layer=e}isExclusive(){return this.exclusive}setExclusive(e){this.exclusive=e}clear(){const e=this.layer;for(const t of this)t.layers.disable(e);return super.clear()}set(e){this.clear();for(const t of e)this.add(t);return this}indexOf(e){return this.has(e)?0:-1}add(e){return this.exclusive?e.layers.set(this.layer):e.layers.enable(this.layer),super.add(e)}delete(e){return this.has(e)&&e.layers.disable(this.layer),super.delete(e)}toggle(e){let t;return this.has(e)?(this.delete(e),t=!1):(this.add(e),t=!0),t}setVisible(e){for(const t of this)e?t.layers.enable(0):t.layers.disable(0);return this}},F={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Mo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Po="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,src.a*opacity);}",Ro="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=(dst.rgb+src.rgb)*0.5;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Do="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.xy,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Co="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/max(b,1e-9))),vec3(1.0),step(1.0,a));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Bo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ao="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Uo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=abs(dst.rgb-src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",ko="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb/max(src.rgb,1e-9);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Io="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-2.0*dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",No="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb,1.0);vec3 b=min(src.rgb,1.0);vec3 c=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Oo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=step(1.0,dst.rgb+src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",zo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.x,a.yz));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Fo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ho="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=src.rgb*max(1.0-dst.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Lo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Go="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",jo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb+src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Vo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(2.0*src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Wo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.xy,b.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Xo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Yo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-abs(1.0-dst.rgb-src.rgb),0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",qo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,opacity);}",$o="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=2.0*src.rgb*dst.rgb;vec3 b=1.0-2.0*(1.0-src.rgb)*(1.0-dst.rgb);vec3 c=mix(a,b,step(0.5,dst.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ko="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 c=mix(mix(src2,dst.rgb,step(0.5*dst.rgb,src.rgb)),max(src2-1.0,vec3(0.0)),step(dst.rgb,src2-1.0));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Zo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb*dst.rgb/max(1.0-src.rgb,1e-9),1.0);vec3 c=mix(a,src.rgb,step(1.0,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Qo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.x,b.y,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Jo="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-min(dst.rgb*src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",el="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 d=dst.rgb+(src2-1.0);vec3 w=step(0.5,src.rgb);vec3 a=dst.rgb-(1.0-src2)*dst.rgb*(1.0-dst.rgb);vec3 b=mix(d*(sqrt(dst.rgb)-dst.rgb),d*dst.rgb*((16.0*dst.rgb-12.0)*dst.rgb+3.0),w*(1.0-step(0.25,dst.rgb)));vec3 c=mix(a,b,w);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",tl="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return src;}",rl="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",sl="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=mix(max(1.0-min((1.0-dst.rgb)/(2.0*src.rgb),1.0),0.0),min(dst.rgb/(2.0*(1.0-src.rgb)),1.0),step(0.5,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",il=new Map([[F.ADD,Mo],[F.ALPHA,Po],[F.AVERAGE,Ro],[F.COLOR,Do],[F.COLOR_BURN,Co],[F.COLOR_DODGE,Bo],[F.DARKEN,Ao],[F.DIFFERENCE,Uo],[F.DIVIDE,ko],[F.DST,null],[F.EXCLUSION,Io],[F.HARD_LIGHT,No],[F.HARD_MIX,Oo],[F.HUE,zo],[F.INVERT,Fo],[F.INVERT_RGB,Ho],[F.LIGHTEN,Lo],[F.LINEAR_BURN,Go],[F.LINEAR_DODGE,jo],[F.LINEAR_LIGHT,Vo],[F.LUMINOSITY,Wo],[F.MULTIPLY,Xo],[F.NEGATION,Yo],[F.NORMAL,qo],[F.OVERLAY,$o],[F.PIN_LIGHT,Ko],[F.REFLECT,Zo],[F.SATURATION,Qo],[F.SCREEN,Jo],[F.SOFT_LIGHT,el],[F.SRC,tl],[F.SUBTRACT,rl],[F.VIVID_LIGHT,sl]]),nl=class extends hi{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new L(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return il.get(this.blendFunction)}},ei=class extends hi{constructor(e,t,{attributes:r=qt.NONE,blendFunction:s=F.NORMAL,defines:i=new Map,uniforms:n=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=i,this.uniforms=n,this.extensions=a,this.blendMode=new nl(s),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=xn,this._outputColorSpace=_n}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=It){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof ft||t instanceof yn||t instanceof Tn||t instanceof Fe)&&this[e].dispose()}}},gi={MEDIUM:2,LARGE:3},al=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,ol="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ll=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],cl=class extends Nt{constructor(e=new Di){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new L(null),texelSize:new L(new Di),scale:new L(1),kernel:new L(0)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:al,vertexShader:ol}),this.setTexelSize(e.x,e.y),this.kernelSize=gi.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return ll[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const r=1/e,s=1/t;this.uniforms.texelSize.value.set(r,s,r*.5,s*.5)}},ul=class extends Fe{constructor({kernelSize:e=gi.MEDIUM,resolutionScale:t=.5,width:r=Se.AUTO_SIZE,height:s=Se.AUTO_SIZE,resolutionX:i=r,resolutionY:n=s}={}){super("KawaseBlurPass"),this.renderTargetA=new ft(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Se(this,i,n,t);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new cl,this._blurMaterial.kernelSize=e,this.copyMaterial=new An}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,s,i){const n=this.scene,a=this.camera,o=this.renderTargetA,c=this.renderTargetB,f=this.blurMaterial,v=f.kernelSequence;let p=t;this.fullscreenMaterial=f;for(let g=0,u=v.length;g<u;++g){const m=(g&1)===0?o:c;f.kernel=v[g],f.inputBuffer=p.texture,e.setRenderTarget(m),e.render(n,a),p=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=p.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(n,a)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t);const s=r.width,i=r.height;this.renderTargetA.setSize(s,i),this.renderTargetB.setSize(s,i),this.blurMaterial.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==Kt?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===Pe&&(this.renderTargetA.texture.colorSpace=Pe,this.renderTargetB.texture.colorSpace=Pe))}static get AUTO_SIZE(){return Se.AUTO_SIZE}},dl=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,hl=class extends Nt{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:En.replace(/\D+/g,"")},uniforms:{inputBuffer:new L(null),threshold:new L(0),smoothing:new L(1),range:new L(null)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dl,vertexShader:fi}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},fl=class extends Fe{constructor({renderTarget:e,luminanceRange:t,colorOutput:r,resolutionScale:s=1,width:i=Se.AUTO_SIZE,height:n=Se.AUTO_SIZE,resolutionX:a=i,resolutionY:o=n}={}){super("LuminancePass"),this.fullscreenMaterial=new hl(r,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new Se(this,a,o,s);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,s,i){const n=this.fullscreenMaterial;n.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==Kt&&(this.renderTarget.texture.type=r,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},pl=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,gl="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",ml=class extends Nt{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new L(null),texelSize:new L(new Me)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:pl,vertexShader:gl})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},vl=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,xl="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",_l=class extends Nt{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new L(null),supportBuffer:new L(null),texelSize:new L(new Me),radius:new L(.85)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vl,vertexShader:xl})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},bl=class extends Fe{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new ft(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new ml,this.upsamplingMaterial=new _l,this.resolution=new Me}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let r=0;r<e;++r){const s=t.clone();s.texture.name="Downsampling.Mipmap"+r,this.downsamplingMipmaps.push(s)}this.upsamplingMipmaps.push(t);for(let r=1,s=e-1;r<s;++r){const i=t.clone();i.texture.name="Upsampling.Mipmap"+r,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,r,s,i){const{scene:n,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:c}=this,{downsamplingMipmaps:f,upsamplingMipmaps:v}=this;let p=t;this.fullscreenMaterial=o;for(let g=0,u=f.length;g<u;++g){const m=f[g];o.setSize(p.width,p.height),o.inputBuffer=p.texture,e.setRenderTarget(m),e.render(n,a),p=m}this.fullscreenMaterial=c;for(let g=v.length-1;g>=0;--g){const u=v[g];c.setSize(p.width,p.height),c.inputBuffer=p.texture,c.supportBuffer=f[g].texture,e.setRenderTarget(u),e.render(n,a),p=u}}setSize(e,t){const r=this.resolution;r.set(e,t);let s=r.width,i=r.height;for(let n=0,a=this.downsamplingMipmaps.length;n<a;++n)s=Math.round(s*.5),i=Math.round(i*.5),this.downsamplingMipmaps[n].setSize(s,i),n<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[n].setSize(s,i)}initialize(e,t,r){if(r!==void 0){const s=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of s)i.texture.type=r;if(r!==Kt)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===Pe)for(const i of s)i.texture.colorSpace=Pe}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Sl=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,Un=class extends ei{constructor({blendFunction:e=F.SCREEN,luminanceThreshold:t=1,luminanceSmoothing:r=.03,mipmapBlur:s=!0,intensity:i=1,radius:n=.85,levels:a=8,kernelSize:o=gi.LARGE,resolutionScale:c=.5,width:f=Se.AUTO_SIZE,height:v=Se.AUTO_SIZE,resolutionX:p=f,resolutionY:g=v}={}){super("BloomEffect",Sl,{blendFunction:e,uniforms:new Map([["map",new L(null)],["intensity",new L(i)]])}),this.renderTarget=new ft(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new ul({kernelSize:o}),this.luminancePass=new fl({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r,this.mipmapBlurPass=new bl,this.mipmapBlurPass.enabled=s,this.mipmapBlurPass.radius=n,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=s?this.mipmapBlurPass.texture:this.renderTarget.texture;const u=this.resolution=new Se(this,p,g,c);u.addEventListener("change",m=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){const s=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,i.renderTarget):this.blurPass.render(e,i.renderTarget,s)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,s)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.blurPass.resolution.copy(r),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,r){this.blurPass.initialize(e,t,r),this.luminancePass.initialize(e,t,r),this.mipmapBlurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e!==null&&e.outputColorSpace===Pe&&(this.renderTarget.texture.colorSpace=Pe))}},yl=class extends Fe{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.input=t}setInput(e){this.input=e}render(e,t,r,s,i){const n=this.fullscreenMaterial.uniforms;t!==null&&n!==void 0&&n[this.input]!==void 0&&(n[this.input].value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==Kt&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},mi=class extends Fe{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new pi,this.overrideMaterialManager=r===null?null:new Fi(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Fi(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,s,i){const n=this.scene,a=this.camera,o=this.selection,c=a.layers.mask,f=n.background,v=e.shadowMap.autoUpdate,p=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(n.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(p),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,n,a):e.render(n,a),a.layers.mask=c,n.background=f,e.shadowMap.autoUpdate=v}},Lr={KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},Tl=class extends Fe{constructor(e,t,{renderTarget:r,resolutionScale:s=1,width:i=Se.AUTO_SIZE,height:n=Se.AUTO_SIZE,resolutionX:a=i,resolutionY:o=n}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new mi(e,t,new Ra({depthPacking:bn}));const c=this.renderPass;c.skipShadowMapUpdate=!0,c.ignoreBackground=!0,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:Pr,magFilter:Pr}),this.renderTarget.texture.name="DepthPass.Target");const f=this.resolution=new Se(this,a,o,s);f.addEventListener("change",v=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,s,i){const n=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,n)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){const s=e.capabilities.reversedDepthBuffer?0:16777215,i=this.renderPass.clearPass;i.overrideClearColor=new Us(s),i.overrideClearAlpha=1}},El=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);float c=log2(cameraNearFar.y+1.0);float d=pow(2.0,depth.x*c)-1.0;depth.x=a+b/d;d=pow(2.0,depth.y*c)-1.0;depth.y=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth.x=1.0-depth.x;depth.y=1.0-depth.y;
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,wl=class extends Nt{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:Lr.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new L(null),depthBuffer0:new L(null),depthBuffer1:new L(null),cameraNearFar:new L(new Me(1,1))},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:El,vertexShader:fi}),this.depthMode=Pi}set depthBuffer0(e){this.uniforms.depthBuffer0.value=e}set depthPacking0(e){this.defines.DEPTH_PACKING_0=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(e,t=It){this.depthBuffer0=e,this.depthPacking0=t}set depthBuffer1(e){this.uniforms.depthBuffer1.value=e}set depthPacking1(e){this.defines.DEPTH_PACKING_1=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(e,t=It){this.depthBuffer1=e,this.depthPacking1=t}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(e){this.defines.DEPTH_TEST_STRATEGY=e.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(e){this.maxDepthStrategy=e?Lr.KEEP_MAX_DEPTH:Lr.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(e){this.maxDepthStrategy=e}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(e){this.defines.DEPTH_EPSILON=e.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(e){this.epsilon=e}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(e){let t;switch(e){case Ua:t="false";break;case Mn:t="true";break;case Qs:t="abs(d1 - d0) <= DEPTH_EPSILON";break;case Sn:t="abs(d1 - d0) > DEPTH_EPSILON";break;case Pi:t="d0 > d1";break;case Aa:t="d0 >= d1";break;case Ba:t="d0 <= d1";break;case Ca:default:t="d0 < d1";break}this.defines.DEPTH_MODE=e.toFixed(0),this.defines["depthTest(d0, d1)"]=t,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(e){this.depthMode=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNearFar.value.set(e.near,e.far),e instanceof wn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Ml=class extends Un{constructor(e,t,r){super(r),this.setAttributes(this.getAttributes()|qt.DEPTH),this.camera=t,this.depthPass=new Tl(e,t),this.clearPass=new pi(!0,!1,!1),this.clearPass.overrideClearColor=new Us(0),this.depthMaskPass=new yl(new wl);const s=this.depthMaskMaterial;s.copyCameraSettings(t),s.depthBuffer1=this.depthPass.texture,s.depthPacking1=bn,s.depthMode=Qs,this.renderTargetMasked=new ft(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new wo,this._inverted=!1,this._ignoreBackground=!1}set mainScene(e){this.depthPass.mainScene=e}set mainCamera(e){this.camera=e,this.depthPass.mainCamera=e,this.depthMaskMaterial.copyCameraSettings(e)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(e){this._inverted=e,this.depthMaskMaterial.depthMode=e?Sn:Qs}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(e){this._ignoreBackground=e,this.depthMaskMaterial.maxDepthStrategy=e?Lr.DISCARD_MAX_DEPTH:Lr.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}setDepthTexture(e,t=It){this.depthMaskMaterial.depthBuffer0=e,this.depthMaskMaterial.depthPacking0=t}update(e,t,r){const s=this.camera,i=this.selection,n=this.inverted;let a=t;if(this.ignoreBackground||!n||i.size>0){const o=s.layers.mask;s.layers.set(i.layer),this.depthPass.render(e),s.layers.mask=o,a=this.renderTargetMasked,this.clearPass.render(e,a),this.depthMaskPass.render(e,t,a)}super.update(e,a,r)}setSize(e,t){super.setSize(e,t),this.renderTargetMasked.setSize(e,t),this.depthPass.setSize(e,t)}initialize(e,t,r){super.initialize(e,t,r),this.clearPass.initialize(e,t,r),this.depthPass.initialize(e,t,r),this.depthMaskPass.initialize(e,t,r),e!==null&&e.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),r!==void 0&&(this.renderTargetMasked.texture.type=r,e!==null&&e.outputColorSpace===Pe&&(this.renderTargetMasked.texture.colorSpace=Pe))}},Pl=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Rl="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Dl=class extends Nt{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new L(null),normalBuffer:new L(null),texelSize:new L(new Me)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Pl,vertexShader:Rl})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=It){this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,e!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Cl=class extends Fe{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:r=Se.AUTO_SIZE,height:s=Se.AUTO_SIZE,resolutionX:i=r,resolutionY:n=s}={}){super("DepthDownsamplingPass");const a=new Dl;a.normalBuffer=e,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new ft(1,1,{minFilter:Pr,magFilter:Pr,depthBuffer:!1,type:Ea}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Se(this,i,n,t);o.addEventListener("change",c=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e,t=It){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,r,s,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,r){const s=e.getContext();if(!(s.getExtension("EXT_color_buffer_float")||s.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},Bl=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Al="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Ul=class extends Nt{constructor(e,t,r,s,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:En.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new L(null),depthBuffer:new L(null),resolution:new L(new Me),texelSize:new L(new Me),cameraNear:new L(.3),cameraFar:new L(1e3),aspect:new L(1),time:new L(0)},blending:Qt,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.copyCameraSettings(s)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=It){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=Bl.replace(V.FRAGMENT_HEAD,e.get(V.FRAGMENT_HEAD)||"").replace(V.FRAGMENT_MAIN_UV,e.get(V.FRAGMENT_MAIN_UV)||"").replace(V.FRAGMENT_MAIN_IMAGE,e.get(V.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Al.replace(V.VERTEX_HEAD,e.get(V.VERTEX_HEAD)||"").replace(V.VERTEX_MAIN_SUPPORT,e.get(V.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof wn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return V}};function Hi(e,t,r){for(const s of t){const i="$1"+e+s.charAt(0).toUpperCase()+s.slice(1),n=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(const a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(n,i))}}function kl(e,t,r){let s=t.getFragmentShader(),i=t.getVertexShader();const n=s!==void 0&&/mainImage/.test(s),a=s!==void 0&&/mainUv/.test(s);if(r.attributes|=t.getAttributes(),s===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(r.attributes&qt.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!n&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=r.shaderParts;let f=c.get(V.FRAGMENT_HEAD)||"",v=c.get(V.FRAGMENT_MAIN_UV)||"",p=c.get(V.FRAGMENT_MAIN_IMAGE)||"",g=c.get(V.VERTEX_HEAD)||"",u=c.get(V.VERTEX_MAIN_SUPPORT)||"";const m=new Set,B=new Set;if(a&&(v+=`	${e}MainUv(UV);
`,r.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const E=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);u+=`	${e}MainSupport(`,u+=E?`vUv);
`:`);
`;for(const b of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const y of b[1].split(/\s*,\s*/))r.varyings.add(y),m.add(y),B.add(y);for(const b of i.matchAll(o))B.add(b[1])}for(const E of s.matchAll(o))B.add(E[1]);for(const E of t.defines.keys())B.add(E.replace(/\([\w\s,]*\)/g,""));for(const E of t.uniforms.keys())B.add(E);B.delete("while"),B.delete("for"),B.delete("if"),t.uniforms.forEach((E,b)=>r.uniforms.set(e+b.charAt(0).toUpperCase()+b.slice(1),E)),t.defines.forEach((E,b)=>r.defines.set(e+b.charAt(0).toUpperCase()+b.slice(1),E));const C=new Map([["fragment",s],["vertex",i]]);Hi(e,B,r.defines),Hi(e,B,C),s=C.get("fragment"),i=C.get("vertex");const R=t.blendMode;if(r.blendModes.set(R.blendFunction,R),n){t.inputColorSpace!==null&&t.inputColorSpace!==r.colorSpace&&(p+=t.inputColorSpace===Pe?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==_n?r.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(r.colorSpace=t.inputColorSpace);const E=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;p+=`${e}MainImage(color0, UV, `,(r.attributes&qt.DEPTH)!==0&&E.test(s)&&(p+="depth, ",r.readDepth=!0),p+=`color1);
	`;const b=e+"BlendOpacity";r.uniforms.set(b,R.opacity),p+=`color0 = blend${R.blendFunction}(color0, color1, ${b});

	`,f+=`uniform float ${b};

`}if(f+=s+`
`,i!==null&&(g+=i+`
`),c.set(V.FRAGMENT_HEAD,f),c.set(V.FRAGMENT_MAIN_UV,v),c.set(V.FRAGMENT_MAIN_IMAGE,p),c.set(V.VERTEX_HEAD,g),c.set(V.VERTEX_MAIN_SUPPORT,u),t.extensions!==null)for(const E of t.extensions)r.extensions.add(E)}}var Il=class extends Fe{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Ul(null,null,null,e),this.listener=r=>this.handleEvent(r),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,r)=>r.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new To;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===F.DST)e.attributes|=a.getAttributes()&qt.DEPTH;else{if((e.attributes&a.getAttributes()&qt.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);kl("e"+t++,a,e)}let r=e.shaderParts.get(V.FRAGMENT_HEAD),s=e.shaderParts.get(V.FRAGMENT_MAIN_IMAGE),i=e.shaderParts.get(V.FRAGMENT_MAIN_UV);const n=/\bblend\b/g;for(const a of e.blendModes.values())r+=a.getShaderCode().replace(n,`blend${a.blendFunction}`)+`
`;(e.attributes&qt.DEPTH)!==0?(e.readDepth&&(s=`float depth = readDepth(UV);

	`+s),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===Pe&&(s+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(V.FRAGMENT_HEAD,r),e.shaderParts.set(V.FRAGMENT_MAIN_IMAGE,s),e.shaderParts.set(V.FRAGMENT_MAIN_UV,i);for(const[a,o]of e.shaderParts)o!==null&&e.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=It){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,s,i){for(const n of this.effects)n.update(e,t,s);if(!this.skipRendering||this.renderToScreen){const n=this.fullscreenMaterial;n.inputBuffer=t.texture,n.time+=s*this.timeScale,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(const s of this.effects)s.initialize(e,t,r);this.updateMaterial(),r!==void 0&&r!==Kt&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Nl=class extends Fe{constructor(e,t,{renderTarget:r,resolutionScale:s=1,width:i=Se.AUTO_SIZE,height:n=Se.AUTO_SIZE,resolutionX:a=i,resolutionY:o=n}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new mi(e,t,new Ta);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const f=c.getClearPass();f.overrideClearColor=new Us(7829503),f.overrideClearAlpha=1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:Pr,magFilter:Pr}),this.renderTarget.texture.name="NormalPass.Target");const v=this.resolution=new Se(this,a,o,s);v.addEventListener("change",p=>this.setSize(v.baseWidth,v.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,s,i){const n=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,n,n)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}};function Gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}new Me;new Me;function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ct=function e(t,r,s){var i=this;kn(this,e),Gr(this,"dot2",function(n,a){return i.x*n+i.y*a}),Gr(this,"dot3",function(n,a,o){return i.x*n+i.y*a+i.z*o}),this.x=t,this.y=r,this.z=s},Ol=[new ct(1,1,0),new ct(-1,1,0),new ct(1,-1,0),new ct(-1,-1,0),new ct(1,0,1),new ct(-1,0,1),new ct(1,0,-1),new ct(-1,0,-1),new ct(0,1,1),new ct(0,-1,1),new ct(0,1,-1),new ct(0,-1,-1)],Li=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Gi=new Array(512),ji=new Array(512),zl=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var r=0;r<256;r++){var s;r&1?s=Li[r]^t&255:s=Li[r]^t>>8&255,Gi[r]=Gi[r+256]=s,ji[r]=ji[r+256]=Ol[s%12]}};zl(0);function Fl(e){if(typeof e=="number")e=Math.abs(e);else if(typeof e=="string"){var t=e;e=0;for(var r=0;r<t.length;r++)e=(e+(r+1)*(t.charCodeAt(r)%96))%2147483647}return e===0&&(e=311),e}function Vi(e){var t=Fl(e);return function(){var r=t*48271%2147483647;return t=r,r/2147483647}}var Hl=function e(t){var r=this;kn(this,e),Gr(this,"seed",0),Gr(this,"init",function(s){r.seed=s,r.value=Vi(s)}),Gr(this,"value",Vi(this.seed)),this.init(t)};new Hl(Math.random());const Ll=_.createContext(null),In=_.createContext(null),Wi=e=>(e.getAttributes()&2)===2,Gl=_.memo(_.forwardRef(({children:e,camera:t,scene:r,resolutionScale:s,enabled:i=!0,renderPriority:n=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:c,stencilBuffer:f,multisampling:v=8,frameBufferType:p=ka},g)=>{const{gl:u,scene:m,camera:B,size:C}=di(),R=r||m,E=t||B,[b,y,ue]=_.useMemo(()=>{const q=new yo(u,{depthBuffer:o,stencilBuffer:f,multisampling:v,frameBufferType:p});q.addPass(new mi(R,E));let ee=null,S=null;return c&&(S=new Nl(R,E),S.enabled=!1,q.addPass(S),s!==void 0&&(ee=new Cl({normalBuffer:S.texture,resolutionScale:s}),ee.enabled=!1,q.addPass(ee))),[q,S,ee]},[E,u,o,f,v,p,R,c,s]);_.useEffect(()=>b?.setSize(C.width,C.height),[b,C]),gn((q,ee)=>{if(i){const S=u.autoClear;u.autoClear=a,f&&!a&&u.clearStencil(),b.render(ee),u.autoClear=S}},i?n:0);const $=_.useRef(null);_.useLayoutEffect(()=>{const q=[],ee=$.current.__r3f;if(ee&&b){const S=ee.children;for(let Q=0;Q<S.length;Q++){const w=S[Q].object;if(w instanceof ei){const at=[w];if(!Wi(w)){let me=null;for(;(me=S[Q+1]?.object)instanceof ei&&!Wi(me);)at.push(me),Q++}const ne=new Il(E,...at);q.push(ne)}else w instanceof Fe&&q.push(w)}for(const Q of q)b?.addPass(Q);y&&(y.enabled=!0),ue&&(ue.enabled=!0)}return()=>{for(const S of q)b?.removePass(S);y&&(y.enabled=!1),ue&&(ue.enabled=!1)}},[b,e,E,y,ue]),_.useEffect(()=>{const q=u.toneMapping;return u.toneMapping=Ia,()=>{u.toneMapping=q}},[u]);const D=_.useMemo(()=>({composer:b,normalPass:y,downSamplingPass:ue,resolutionScale:s,camera:E,scene:R}),[b,y,ue,s,E,R]);return _.useImperativeHandle(g,()=>b,[b]),d.jsx(In.Provider,{value:D,children:d.jsx("group",{ref:$,children:e})})})),ls=e=>typeof e=="object"&&e!=null&&"current"in e?e.current:e;let jl=0;const Xi=new WeakMap,Vl=(e,t)=>function({blendFunction:r=t?.blendFunction,opacity:s=t?.opacity,...i}){let n=Xi.get(e);if(!n){const c=`@react-three/postprocessing/${e.name}-${jl++}`;fa({[c]:e}),Xi.set(e,n=c)}const a=di(c=>c.camera),o=mn.useMemo(()=>[...t?.args??[],...i.args??[{...t,...i}]],[JSON.stringify(i)]);return d.jsx(n,{camera:a,"blendMode-blendFunction":r,"blendMode-opacity-value":s,...i,args:o})},Bc=Vl(Un,{blendFunction:0}),Wl=(e,t)=>e.layers.enable(t.selection.layer),Xl=(e,t)=>e.layers.disable(t.selection.layer),Yl=_.forwardRef(function({selection:e=[],selectionLayer:t=10,lights:r=[],inverted:s=!1,ignoreBackground:i=!1,luminanceThreshold:n,luminanceSmoothing:a,intensity:o,width:c,height:f,kernelSize:v,mipmapBlur:p,...g},u){r.length===0&&console.warn("SelectiveBloom requires lights to work.");const m=di(b=>b.invalidate),{scene:B,camera:C}=_.useContext(In),R=_.useMemo(()=>{const b=new Ml(B,C,{blendFunction:0,luminanceThreshold:n,luminanceSmoothing:a,intensity:o,width:c,height:f,kernelSize:v,mipmapBlur:p,...g});return b.inverted=s,b.ignoreBackground=i,b},[B,C,n,a,o,c,f,v,p,s,i,g]),E=_.useContext(Ll);return _.useEffect(()=>{if(!E&&e)return R.selection.set(Array.isArray(e)?e.map(ls):[ls(e)]),m(),()=>{R.selection.clear(),m()}},[R,e,E,m]),_.useEffect(()=>{R.selection.layer=t,m()},[R,m,t]),_.useEffect(()=>{if(r&&r.length>0)return r.forEach(b=>Wl(ls(b),R)),m(),()=>{r.forEach(b=>Xl(ls(b),R)),m()}},[R,m,r,t]),_.useEffect(()=>{if(E&&E.enabled&&E.selected?.length)return R.selection.set(E.selected),m(),()=>{R.selection.clear(),m()}},[E,R.selection,m]),d.jsx("primitive",{ref:u,object:R,dispose:null})}),ql=_.memo(function(t){const{nodes:r,materials:s}=vn("/models/optimized-room.glb"),i=_.useRef(),n=pa("/images/textures/mat1.png"),a=_.useMemo(()=>new xr({color:"#d90429"}),[]),o=_.useMemo(()=>new xr({map:n}),[n]),c=_.useMemo(()=>new xr({color:"#582f0e"}),[]),f=_.useMemo(()=>new xr({color:"#fff"}),[]),v=_.useMemo(()=>new Na({color:"#fff"}),[]),p=_.useMemo(()=>new xr({color:"#8338ec"}),[]),g=_.useMemo(()=>new xr({color:"#000"}),[]);return d.jsxs("group",{...t,dispose:null,children:[d.jsx(Gl,{children:d.jsx(Yl,{selection:i,intensity:1,luminanceThreshold:.2,luminanceSmoothing:.9,blendFunction:F.ADD})}),d.jsx("mesh",{geometry:r._________6_blinn1_0.geometry,material:a}),d.jsx("mesh",{geometry:r.body1_blinn1_0.geometry,material:o}),d.jsx("mesh",{geometry:r.cabin_blinn1_0.geometry,material:c}),d.jsx("mesh",{geometry:r.chair_body_blinn1_0.geometry,material:g}),d.jsx("mesh",{geometry:r.comp_blinn1_0.geometry,material:v}),d.jsx("mesh",{ref:i,geometry:r.emis_lambert1_0.geometry,material:s.lambert1}),d.jsx("mesh",{geometry:r.handls_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.keyboard_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.kovrik_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.lamp_bl_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.lamp_white_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.miuse_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.monitor2_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.monitor3_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.pCylinder5_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.pillows_blinn1_0.geometry,material:p}),d.jsx("mesh",{geometry:r.polySurface53_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.radiator_blinn1_0.geometry,material:f}),d.jsx("mesh",{geometry:r.radiator_blinn1_0001.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.railing_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.red_bttns_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.red_vac_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.stylus_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.table_blinn1_0.geometry,material:c}),d.jsx("mesh",{geometry:r.tablet_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.triangle_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.vac_black_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.vacuum1_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.vacuumgrey_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.vires_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.window_blinn1_0.geometry,material:s.blinn1}),d.jsx("mesh",{geometry:r.window4_phong1_0.geometry,material:s.phong1})]})});vn.preload("/models/optimized-room.glb");const Nn=_.memo(()=>d.jsxs(d.Fragment,{children:[d.jsx("spotLight",{position:[2,5,6],angle:.15,penumbra:.2,intensity:100,color:"white"}),d.jsx(ga,{position:[-1,5,6],angle:.15,penumbra:.2,intensity:100,color:"white"}),d.jsx("spotLight",{position:[4,5,4],angle:.3,penumbra:.5,intensity:40,color:"#4cc9f0"}),d.jsx("spotLight",{position:[-3,5,5],angle:.4,penumbra:1,intensity:60,color:"#9d4edd"}),d.jsx("primitive",{object:new Oa("#a259ff",8,3,2),position:[1,3,4],rotation:[-Math.PI/4,Math.PI/4,0],intensity:15}),d.jsx("pointLight",{position:[0,1,0],intensity:10,color:"#7209b7"}),d.jsx("pointLight",{position:[1,2,-2],intensity:10,color:"#0d00a4"})]}));Nn.displayName="HeroLights";const On=_.memo(({count:e=200})=>{const t=_.useRef(),r=_.useMemo(()=>{const i=[];for(let n=0;n<e;n++)i.push({position:[(Math.random()-.5)*10,Math.random()*10+5,(Math.random()-.5)*10],speed:.005+Math.random()*.001});return i},[e]),s=_.useMemo(()=>{const i=new Float32Array(e*3);return r.forEach((n,a)=>{i[a*3]=n.position[0],i[a*3+1]=n.position[1],i[a*3+2]=n.position[2]}),i},[e,r]);return gn(()=>{if(!t.current)return;const i=t.current.geometry.attributes.position.array;for(let n=0;n<e;n++){let a=i[n*3+1];a-=r[n].speed,a<-2&&(a=Math.random()*10+5),i[n*3+1]=a}t.current.geometry.attributes.position.needsUpdate=!0}),d.jsxs("points",{ref:t,children:[d.jsx("bufferGeometry",{children:d.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:s,itemSize:3})}),d.jsx("pointsMaterial",{color:"#ffffff",size:.05,transparent:!0,opacity:.9,depthWrite:!1})]})});On.displayName="Particles";const zn=_.memo(({isActive:e=!0})=>{const t=Oi({query:"(max-width: 768px)"}),r=Oi({query:"(max-width: 1024px)"}),s=_.useMemo(()=>t?40:80,[t]);return d.jsxs(ma,{camera:{position:[0,0,15],fov:45},dpr:[1,1.5],gl:{antialias:!0,powerPreference:"high-performance"},frameloop:e?"always":"demand",children:[d.jsx("ambientLight",{intensity:.2,color:"#1a1a40"}),d.jsx(va,{enablePan:!1,enableZoom:!r,maxDistance:20,minDistance:5,minPolarAngle:Math.PI/5,maxPolarAngle:Math.PI/2,enableDamping:!0,dampingFactor:.05}),d.jsxs(_.Suspense,{fallback:null,children:[d.jsx(Nn,{}),e&&d.jsx(On,{count:s}),d.jsx("group",{scale:t?.7:1,position:[0,-3.5,0],rotation:[0,-Math.PI/4,0],children:d.jsx(ql,{})})]})]})});zn.displayName="HeroExperience";let Yi=typeof document<"u"?_.useLayoutEffect:_.useEffect,qi=e=>e&&!Array.isArray(e)&&typeof e=="object",cs=[],$l={},Fn=Jr;const ks=(e,t=cs)=>{let r=$l;qi(e)?(r=e,e=null,t="dependencies"in r?r.dependencies:cs):qi(t)&&(r=t,t="dependencies"in r?r.dependencies:cs),e&&typeof e!="function"&&console.warn("First parameter must be a function or config object");const{scope:s,revertOnUpdate:i}=r,n=_.useRef(!1),a=_.useRef(Fn.context(()=>{},s)),o=_.useRef(f=>a.current.add(null,f)),c=t&&t.length&&!i;return c&&Yi(()=>(n.current=!0,()=>a.current.revert()),cs),Yi(()=>{if(e&&a.current.add(e,s),!c||!n.current)return()=>a.current.revert()},t),{context:a.current,contextSafe:o.current}};ks.register=e=>{Fn=e};ks.headless=!0;function Kl(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Zl(e,t,r){return t&&Kl(e.prototype,t),e}var Ce,ys,nt,Xt,Yt,Er,Hn,ar,jr,Ln,Ut,_t,Gn,jn=function(){return Ce||typeof window<"u"&&(Ce=window.gsap)&&Ce.registerPlugin&&Ce},Vn=1,Tr=[],O=[],wt=[],Vr=Date.now,ti=function(t,r){return r},Ql=function(){var t=jr.core,r=t.bridge||{},s=t._scrollers,i=t._proxies;s.push.apply(s,O),i.push.apply(i,wt),O=s,wt=i,ti=function(a,o){return r[a](o)}},$t=function(t,r){return~wt.indexOf(t)&&wt[wt.indexOf(t)+1][r]},Wr=function(t){return!!~Ln.indexOf(t)},We=function(t,r,s,i,n){return t.addEventListener(r,s,{passive:i!==!1,capture:!!n})},Ve=function(t,r,s,i){return t.removeEventListener(r,s,!!i)},us="scrollLeft",ds="scrollTop",ri=function(){return Ut&&Ut.isPressed||O.cache++},Ds=function(t,r){var s=function i(n){if(n||n===0){Vn&&(nt.history.scrollRestoration="manual");var a=Ut&&Ut.isPressed;n=i.v=Math.round(n)||(Ut&&Ut.iOS?1:0),t(n),i.cacheID=O.cache,a&&ti("ss",n)}else(r||O.cache!==i.cacheID||ti("ref"))&&(i.cacheID=O.cache,i.v=t());return i.v+i.offset};return s.offset=0,t&&s},Ke={s:us,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Ds(function(e){return arguments.length?nt.scrollTo(e,be.sc()):nt.pageXOffset||Xt[us]||Yt[us]||Er[us]||0})},be={s:ds,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ke,sc:Ds(function(e){return arguments.length?nt.scrollTo(Ke.sc(),e):nt.pageYOffset||Xt[ds]||Yt[ds]||Er[ds]||0})},Qe=function(t,r){return(r&&r._ctx&&r._ctx.selector||Ce.utils.toArray)(t)[0]||(typeof t=="string"&&Ce.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},Jl=function(t,r){for(var s=r.length;s--;)if(r[s]===t||r[s].contains(t))return!0;return!1},Zt=function(t,r){var s=r.s,i=r.sc;Wr(t)&&(t=Xt.scrollingElement||Yt);var n=O.indexOf(t),a=i===be.sc?1:2;!~n&&(n=O.push(t)-1),O[n+a]||We(t,"scroll",ri);var o=O[n+a],c=o||(O[n+a]=Ds($t(t,s),!0)||(Wr(t)?i:Ds(function(f){return arguments.length?t[s]=f:t[s]})));return c.target=t,o||(c.smooth=Ce.getProperty(t,"scrollBehavior")==="smooth"),c},si=function(t,r,s){var i=t,n=t,a=Vr(),o=a,c=r||50,f=Math.max(500,c*3),v=function(m,B){var C=Vr();B||C-a>c?(n=i,i=m,o=a,a=C):s?i+=m:i=n+(m-n)/(C-o)*(a-o)},p=function(){n=i=s?0:i,o=a=0},g=function(m){var B=o,C=n,R=Vr();return(m||m===0)&&m!==i&&v(m),a===o||R-o>f?0:(i+(s?C:-C))/((s?R:a)-B)*1e3};return{update:v,reset:p,getVelocity:g}},kr=function(t,r){return r&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},$i=function(t){var r=Math.max.apply(Math,t),s=Math.min.apply(Math,t);return Math.abs(r)>=Math.abs(s)?r:s},Wn=function(){jr=Ce.core.globals().ScrollTrigger,jr&&jr.core&&Ql()},Xn=function(t){return Ce=t||jn(),!ys&&Ce&&typeof document<"u"&&document.body&&(nt=window,Xt=document,Yt=Xt.documentElement,Er=Xt.body,Ln=[nt,Xt,Yt,Er],Ce.utils.clamp,Gn=Ce.core.context||function(){},ar="onpointerenter"in Er?"pointer":"mouse",Hn=ce.isTouch=nt.matchMedia&&nt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in nt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,_t=ce.eventTypes=("ontouchstart"in Yt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Yt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Vn=0},500),Wn(),ys=1),ys};Ke.op=be;O.cache=0;var ce=(function(){function e(r){this.init(r)}var t=e.prototype;return t.init=function(s){ys||Xn(Ce)||console.warn("Please gsap.registerPlugin(Observer)"),jr||Wn();var i=s.tolerance,n=s.dragMinimum,a=s.type,o=s.target,c=s.lineHeight,f=s.debounce,v=s.preventDefault,p=s.onStop,g=s.onStopDelay,u=s.ignore,m=s.wheelSpeed,B=s.event,C=s.onDragStart,R=s.onDragEnd,E=s.onDrag,b=s.onPress,y=s.onRelease,ue=s.onRight,$=s.onLeft,D=s.onUp,q=s.onDown,ee=s.onChangeX,S=s.onChangeY,Q=s.onChange,w=s.onToggleX,at=s.onToggleY,ne=s.onHover,me=s.onHoverEnd,He=s.onMove,K=s.ignoreCheck,de=s.isNormalizer,he=s.onGestureStart,l=s.onGestureEnd,ve=s.onWheel,Jt=s.onEnable,Ot=s.onDisable,ot=s.onClick,Mt=s.scrollSpeed,Be=s.capture,fe=s.allowClicks,Le=s.lockAxis,Ae=s.onLockAxis;this.target=o=Qe(o)||Yt,this.vars=s,u&&(u=Ce.utils.toArray(u)),i=i||1e-9,n=n||0,m=m||1,Mt=Mt||1,a=a||"wheel,touch,pointer",f=f!==!1,c||(c=parseFloat(nt.getComputedStyle(Er).lineHeight)||22);var zt,Ge,je,j,ae,Ze,Je,h=this,et=0,Pt=0,Ft=s.passive||!v&&s.passive!==!1,se=Zt(o,Ke),Rt=Zt(o,be),Ht=se(),er=Rt(),ye=~a.indexOf("touch")&&!~a.indexOf("pointer")&&_t[0]==="pointerdown",Lt=Wr(o),oe=o.ownerDocument||Xt,pt=[0,0,0],lt=[0,0,0],Dt=0,Cr=function(){return Dt=Vr()},pe=function(P,W){return(h.event=P)&&u&&Jl(P.target,u)||W&&ye&&P.pointerType!=="touch"||K&&K(P,W)},rs=function(){h._vx.reset(),h._vy.reset(),Ge.pause(),p&&p(h)},Ct=function(){var P=h.deltaX=$i(pt),W=h.deltaY=$i(lt),x=Math.abs(P)>=i,A=Math.abs(W)>=i;Q&&(x||A)&&Q(h,P,W,pt,lt),x&&(ue&&h.deltaX>0&&ue(h),$&&h.deltaX<0&&$(h),ee&&ee(h),w&&h.deltaX<0!=et<0&&w(h),et=h.deltaX,pt[0]=pt[1]=pt[2]=0),A&&(q&&h.deltaY>0&&q(h),D&&h.deltaY<0&&D(h),S&&S(h),at&&h.deltaY<0!=Pt<0&&at(h),Pt=h.deltaY,lt[0]=lt[1]=lt[2]=0),(j||je)&&(He&&He(h),je&&(C&&je===1&&C(h),E&&E(h),je=0),j=!1),Ze&&!(Ze=!1)&&Ae&&Ae(h),ae&&(ve(h),ae=!1),zt=0},gr=function(P,W,x){pt[x]+=P,lt[x]+=W,h._vx.update(P),h._vy.update(W),f?zt||(zt=requestAnimationFrame(Ct)):Ct()},mr=function(P,W){Le&&!Je&&(h.axis=Je=Math.abs(P)>Math.abs(W)?"x":"y",Ze=!0),Je!=="y"&&(pt[2]+=P,h._vx.update(P,!0)),Je!=="x"&&(lt[2]+=W,h._vy.update(W,!0)),f?zt||(zt=requestAnimationFrame(Ct)):Ct()},Gt=function(P){if(!pe(P,1)){P=kr(P,v);var W=P.clientX,x=P.clientY,A=W-h.x,M=x-h.y,U=h.isDragging;h.x=W,h.y=x,(U||(A||M)&&(Math.abs(h.startX-W)>=n||Math.abs(h.startY-x)>=n))&&(je||(je=U?2:1),U||(h.isDragging=!0),mr(A,M))}},tr=h.onPress=function(k){pe(k,1)||k&&k.button||(h.axis=Je=null,Ge.pause(),h.isPressed=!0,k=kr(k),et=Pt=0,h.startX=h.x=k.clientX,h.startY=h.y=k.clientY,h._vx.reset(),h._vy.reset(),We(de?o:oe,_t[1],Gt,Ft,!0),h.deltaX=h.deltaY=0,b&&b(h))},z=h.onRelease=function(k){if(!pe(k,1)){Ve(de?o:oe,_t[1],Gt,!0);var P=!isNaN(h.y-h.startY),W=h.isDragging,x=W&&(Math.abs(h.x-h.startX)>3||Math.abs(h.y-h.startY)>3),A=kr(k);!x&&P&&(h._vx.reset(),h._vy.reset(),v&&fe&&Ce.delayedCall(.08,function(){if(Vr()-Dt>300&&!k.defaultPrevented){if(k.target.click)k.target.click();else if(oe.createEvent){var M=oe.createEvent("MouseEvents");M.initMouseEvent("click",!0,!0,nt,1,A.screenX,A.screenY,A.clientX,A.clientY,!1,!1,!1,!1,0,null),k.target.dispatchEvent(M)}}})),h.isDragging=h.isGesturing=h.isPressed=!1,p&&W&&!de&&Ge.restart(!0),je&&Ct(),R&&W&&R(h),y&&y(h,x)}},rr=function(P){return P.touches&&P.touches.length>1&&(h.isGesturing=!0)&&he(P,h.isDragging)},gt=function(){return(h.isGesturing=!1)||l(h)},mt=function(P){if(!pe(P)){var W=se(),x=Rt();gr((W-Ht)*Mt,(x-er)*Mt,1),Ht=W,er=x,p&&Ge.restart(!0)}},vt=function(P){if(!pe(P)){P=kr(P,v),ve&&(ae=!0);var W=(P.deltaMode===1?c:P.deltaMode===2?nt.innerHeight:1)*m;gr(P.deltaX*W,P.deltaY*W,0),p&&!de&&Ge.restart(!0)}},sr=function(P){if(!pe(P)){var W=P.clientX,x=P.clientY,A=W-h.x,M=x-h.y;h.x=W,h.y=x,j=!0,p&&Ge.restart(!0),(A||M)&&mr(A,M)}},vr=function(P){h.event=P,ne(h)},Bt=function(P){h.event=P,me(h)},Br=function(P){return pe(P)||kr(P,v)&&ot(h)};Ge=h._dc=Ce.delayedCall(g||.25,rs).pause(),h.deltaX=h.deltaY=0,h._vx=si(0,50,!0),h._vy=si(0,50,!0),h.scrollX=se,h.scrollY=Rt,h.isDragging=h.isGesturing=h.isPressed=!1,Gn(this),h.enable=function(k){return h.isEnabled||(We(Lt?oe:o,"scroll",ri),a.indexOf("scroll")>=0&&We(Lt?oe:o,"scroll",mt,Ft,Be),a.indexOf("wheel")>=0&&We(o,"wheel",vt,Ft,Be),(a.indexOf("touch")>=0&&Hn||a.indexOf("pointer")>=0)&&(We(o,_t[0],tr,Ft,Be),We(oe,_t[2],z),We(oe,_t[3],z),fe&&We(o,"click",Cr,!0,!0),ot&&We(o,"click",Br),he&&We(oe,"gesturestart",rr),l&&We(oe,"gestureend",gt),ne&&We(o,ar+"enter",vr),me&&We(o,ar+"leave",Bt),He&&We(o,ar+"move",sr)),h.isEnabled=!0,h.isDragging=h.isGesturing=h.isPressed=j=je=!1,h._vx.reset(),h._vy.reset(),Ht=se(),er=Rt(),k&&k.type&&tr(k),Jt&&Jt(h)),h},h.disable=function(){h.isEnabled&&(Tr.filter(function(k){return k!==h&&Wr(k.target)}).length||Ve(Lt?oe:o,"scroll",ri),h.isPressed&&(h._vx.reset(),h._vy.reset(),Ve(de?o:oe,_t[1],Gt,!0)),Ve(Lt?oe:o,"scroll",mt,Be),Ve(o,"wheel",vt,Be),Ve(o,_t[0],tr,Be),Ve(oe,_t[2],z),Ve(oe,_t[3],z),Ve(o,"click",Cr,!0),Ve(o,"click",Br),Ve(oe,"gesturestart",rr),Ve(oe,"gestureend",gt),Ve(o,ar+"enter",vr),Ve(o,ar+"leave",Bt),Ve(o,ar+"move",sr),h.isEnabled=h.isPressed=h.isDragging=!1,Ot&&Ot(h))},h.kill=h.revert=function(){h.disable();var k=Tr.indexOf(h);k>=0&&Tr.splice(k,1),Ut===h&&(Ut=0)},Tr.push(h),de&&Wr(o)&&(Ut=h),h.enable(B)},Zl(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e})();ce.version="3.14.2";ce.create=function(e){return new ce(e)};ce.register=Xn;ce.getAll=function(){return Tr.slice()};ce.getById=function(e){return Tr.filter(function(t){return t.vars.id===e})[0]};jn()&&Ce.registerPlugin(ce);var T,Sr,N,J,it,Y,vi,Cs,es,Xr,Nr,hs,Ne,Is,ii,qe,Ki,Zi,yr,Yn,Ws,qn,Ye,ni,$n,Kn,Wt,ai,xi,wr,_i,Yr,oi,Xs,fs=1,Oe=Date.now,Ys=Oe(),ht=0,Or=0,Qi=function(t,r,s){var i=st(t)&&(t.substr(0,6)==="clamp("||t.indexOf("max")>-1);return s["_"+r+"Clamp"]=i,i?t.substr(6,t.length-7):t},Ji=function(t,r){return r&&(!st(t)||t.substr(0,6)!=="clamp(")?"clamp("+t+")":t},ec=function e(){return Or&&requestAnimationFrame(e)},en=function(){return Is=1},tn=function(){return Is=0},Tt=function(t){return t},zr=function(t){return Math.round(t*1e5)/1e5||0},Zn=function(){return typeof window<"u"},Qn=function(){return T||Zn()&&(T=window.gsap)&&T.registerPlugin&&T},hr=function(t){return!!~vi.indexOf(t)},Jn=function(t){return(t==="Height"?_i:N["inner"+t])||it["client"+t]||Y["client"+t]},ea=function(t){return $t(t,"getBoundingClientRect")||(hr(t)?function(){return Ps.width=N.innerWidth,Ps.height=_i,Ps}:function(){return At(t)})},tc=function(t,r,s){var i=s.d,n=s.d2,a=s.a;return(a=$t(t,"getBoundingClientRect"))?function(){return a()[i]}:function(){return(r?Jn(n):t["client"+n])||0}},rc=function(t,r){return!r||~wt.indexOf(t)?ea(t):function(){return Ps}},Et=function(t,r){var s=r.s,i=r.d2,n=r.d,a=r.a;return Math.max(0,(s="scroll"+i)&&(a=$t(t,s))?a()-ea(t)()[n]:hr(t)?(it[s]||Y[s])-Jn(i):t[s]-t["offset"+i])},ps=function(t,r){for(var s=0;s<yr.length;s+=3)(!r||~r.indexOf(yr[s+1]))&&t(yr[s],yr[s+1],yr[s+2])},st=function(t){return typeof t=="string"},ze=function(t){return typeof t=="function"},Fr=function(t){return typeof t=="number"},or=function(t){return typeof t=="object"},Ir=function(t,r,s){return t&&t.progress(r?0:1)&&s&&t.pause()},qs=function(t,r){if(t.enabled){var s=t._ctx?t._ctx.add(function(){return r(t)}):r(t);s&&s.totalTime&&(t.callbackAnimation=s)}},_r=Math.abs,ta="left",ra="top",bi="right",Si="bottom",cr="width",ur="height",qr="Right",$r="Left",Kr="Top",Zr="Bottom",ge="padding",ut="margin",Rr="Width",yi="Height",_e="px",dt=function(t){return N.getComputedStyle(t)},sc=function(t){var r=dt(t).position;t.style.position=r==="absolute"||r==="fixed"?r:"relative"},rn=function(t,r){for(var s in r)s in t||(t[s]=r[s]);return t},At=function(t,r){var s=r&&dt(t)[ii]!=="matrix(1, 0, 0, 1, 0, 0)"&&T.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return s&&s.progress(0).kill(),i},Bs=function(t,r){var s=r.d2;return t["offset"+s]||t["client"+s]||0},sa=function(t){var r=[],s=t.labels,i=t.duration(),n;for(n in s)r.push(s[n]/i);return r},ic=function(t){return function(r){return T.utils.snap(sa(t),r)}},Ti=function(t){var r=T.utils.snap(t),s=Array.isArray(t)&&t.slice(0).sort(function(i,n){return i-n});return s?function(i,n,a){a===void 0&&(a=.001);var o;if(!n)return r(i);if(n>0){for(i-=a,o=0;o<s.length;o++)if(s[o]>=i)return s[o];return s[o-1]}else for(o=s.length,i+=a;o--;)if(s[o]<=i)return s[o];return s[0]}:function(i,n,a){a===void 0&&(a=.001);var o=r(i);return!n||Math.abs(o-i)<a||o-i<0==n<0?o:r(n<0?i-t:i+t)}},nc=function(t){return function(r,s){return Ti(sa(t))(r,s.direction)}},gs=function(t,r,s,i){return s.split(",").forEach(function(n){return t(r,n,i)})},we=function(t,r,s,i,n){return t.addEventListener(r,s,{passive:!i,capture:!!n})},Ee=function(t,r,s,i){return t.removeEventListener(r,s,!!i)},ms=function(t,r,s){s=s&&s.wheelHandler,s&&(t(r,"wheel",s),t(r,"touchmove",s))},sn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},vs={toggleActions:"play",anticipatePin:0},As={top:0,left:0,center:.5,bottom:1,right:1},Ts=function(t,r){if(st(t)){var s=t.indexOf("="),i=~s?+(t.charAt(s-1)+1)*parseFloat(t.substr(s+1)):0;~s&&(t.indexOf("%")>s&&(i*=r/100),t=t.substr(0,s-1)),t=i+(t in As?As[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0)}return t},xs=function(t,r,s,i,n,a,o,c){var f=n.startColor,v=n.endColor,p=n.fontSize,g=n.indent,u=n.fontWeight,m=J.createElement("div"),B=hr(s)||$t(s,"pinType")==="fixed",C=t.indexOf("scroller")!==-1,R=B?Y:s,E=t.indexOf("start")!==-1,b=E?f:v,y="border-color:"+b+";font-size:"+p+";color:"+b+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return y+="position:"+((C||c)&&B?"fixed;":"absolute;"),(C||c||!B)&&(y+=(i===be?bi:Si)+":"+(a+parseFloat(g))+"px;"),o&&(y+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=E,m.setAttribute("class","gsap-marker-"+t+(r?" marker-"+r:"")),m.style.cssText=y,m.innerText=r||r===0?t+"-"+r:t,R.children[0]?R.insertBefore(m,R.children[0]):R.appendChild(m),m._offset=m["offset"+i.op.d2],Es(m,0,i,E),m},Es=function(t,r,s,i){var n={display:"block"},a=s[i?"os2":"p2"],o=s[i?"p2":"os2"];t._isFlipped=i,n[s.a+"Percent"]=i?-100:0,n[s.a]=i?"1px":0,n["border"+a+Rr]=1,n["border"+o+Rr]=0,n[s.p]=r+"px",T.set(t,n)},I=[],li={},ts,nn=function(){return Oe()-ht>34&&(ts||(ts=requestAnimationFrame(kt)))},br=function(){(!Ye||!Ye.isPressed||Ye.startX>Y.clientWidth)&&(O.cache++,Ye?ts||(ts=requestAnimationFrame(kt)):kt(),ht||pr("scrollStart"),ht=Oe())},$s=function(){Kn=N.innerWidth,$n=N.innerHeight},Hr=function(t){O.cache++,(t===!0||!Ne&&!qn&&!J.fullscreenElement&&!J.webkitFullscreenElement&&(!ni||Kn!==N.innerWidth||Math.abs(N.innerHeight-$n)>N.innerHeight*.25))&&Cs.restart(!0)},fr={},ac=[],ia=function e(){return Ee(H,"scrollEnd",e)||lr(!0)},pr=function(t){return fr[t]&&fr[t].map(function(r){return r()})||ac},rt=[],na=function(t){for(var r=0;r<rt.length;r+=5)(!t||rt[r+4]&&rt[r+4].query===t)&&(rt[r].style.cssText=rt[r+1],rt[r].getBBox&&rt[r].setAttribute("transform",rt[r+2]||""),rt[r+3].uncache=1)},aa=function(){return O.forEach(function(t){return ze(t)&&++t.cacheID&&(t.rec=t())})},Ei=function(t,r){var s;for(qe=0;qe<I.length;qe++)s=I[qe],s&&(!r||s._ctx===r)&&(t?s.kill(1):s.revert(!0,!0));Yr=!0,r&&na(r),r||pr("revert")},oa=function(t,r){O.cache++,(r||!$e)&&O.forEach(function(s){return ze(s)&&s.cacheID++&&(s.rec=0)}),st(t)&&(N.history.scrollRestoration=xi=t)},$e,dr=0,an,oc=function(){if(an!==dr){var t=an=dr;requestAnimationFrame(function(){return t===dr&&lr(!0)})}},la=function(){Y.appendChild(wr),_i=!Ye&&wr.offsetHeight||N.innerHeight,Y.removeChild(wr)},on=function(t){return es(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=t?"none":"block"})},lr=function(t,r){if(it=J.documentElement,Y=J.body,vi=[N,J,it,Y],ht&&!t&&!Yr){we(H,"scrollEnd",ia);return}la(),$e=H.isRefreshing=!0,Yr||aa();var s=pr("refreshInit");Yn&&H.sort(),r||Ei(),O.forEach(function(i){ze(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),I.slice(0).forEach(function(i){return i.refresh()}),Yr=!1,I.forEach(function(i){if(i._subPinOffset&&i.pin){var n=i.vars.horizontal?"offsetWidth":"offsetHeight",a=i.pin[n];i.revert(!0,1),i.adjustPinSpacing(i.pin[n]-a),i.refresh()}}),oi=1,on(!0),I.forEach(function(i){var n=Et(i.scroller,i._dir),a=i.vars.end==="max"||i._endClamp&&i.end>n,o=i._startClamp&&i.start>=n;(a||o)&&i.setPositions(o?n-1:i.start,a?Math.max(o?n:i.start+1,n):i.end,!0)}),on(!1),oi=0,s.forEach(function(i){return i&&i.render&&i.render(-1)}),O.forEach(function(i){ze(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),oa(xi,1),Cs.pause(),dr++,$e=2,kt(2),I.forEach(function(i){return ze(i.vars.onRefresh)&&i.vars.onRefresh(i)}),$e=H.isRefreshing=!1,pr("refresh")},ci=0,ws=1,Qr,kt=function(t){if(t===2||!$e&&!Yr){H.isUpdating=!0,Qr&&Qr.update(0);var r=I.length,s=Oe(),i=s-Ys>=50,n=r&&I[0].scroll();if(ws=ci>n?-1:1,$e||(ci=n),i&&(ht&&!Is&&s-ht>200&&(ht=0,pr("scrollEnd")),Nr=Ys,Ys=s),ws<0){for(qe=r;qe-- >0;)I[qe]&&I[qe].update(0,i);ws=1}else for(qe=0;qe<r;qe++)I[qe]&&I[qe].update(0,i);H.isUpdating=!1}ts=0},ui=[ta,ra,Si,bi,ut+Zr,ut+qr,ut+Kr,ut+$r,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Ms=ui.concat([cr,ur,"boxSizing","max"+Rr,"max"+yi,"position",ut,ge,ge+Kr,ge+qr,ge+Zr,ge+$r]),lc=function(t,r,s){Mr(s);var i=t._gsap;if(i.spacerIsNative)Mr(i.spacerState);else if(t._gsap.swappedIn){var n=r.parentNode;n&&(n.insertBefore(t,r),n.removeChild(r))}t._gsap.swappedIn=!1},Ks=function(t,r,s,i){if(!t._gsap.swappedIn){for(var n=ui.length,a=r.style,o=t.style,c;n--;)c=ui[n],a[c]=s[c];a.position=s.position==="absolute"?"absolute":"relative",s.display==="inline"&&(a.display="inline-block"),o[Si]=o[bi]="auto",a.flexBasis=s.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[cr]=Bs(t,Ke)+_e,a[ur]=Bs(t,be)+_e,a[ge]=o[ut]=o[ra]=o[ta]="0",Mr(i),o[cr]=o["max"+Rr]=s[cr],o[ur]=o["max"+yi]=s[ur],o[ge]=s[ge],t.parentNode!==r&&(t.parentNode.insertBefore(r,t),r.appendChild(t)),t._gsap.swappedIn=!0}},cc=/([A-Z])/g,Mr=function(t){if(t){var r=t.t.style,s=t.length,i=0,n,a;for((t.t._gsap||T.core.getCache(t.t)).uncache=1;i<s;i+=2)a=t[i+1],n=t[i],a?r[n]=a:r[n]&&r.removeProperty(n.replace(cc,"-$1").toLowerCase())}},_s=function(t){for(var r=Ms.length,s=t.style,i=[],n=0;n<r;n++)i.push(Ms[n],s[Ms[n]]);return i.t=t,i},uc=function(t,r,s){for(var i=[],n=t.length,a=s?8:0,o;a<n;a+=2)o=t[a],i.push(o,o in r?r[o]:t[a+1]);return i.t=t.t,i},Ps={left:0,top:0},ln=function(t,r,s,i,n,a,o,c,f,v,p,g,u,m){ze(t)&&(t=t(c)),st(t)&&t.substr(0,3)==="max"&&(t=g+(t.charAt(4)==="="?Ts("0"+t.substr(3),s):0));var B=u?u.time():0,C,R,E;if(u&&u.seek(0),isNaN(t)||(t=+t),Fr(t))u&&(t=T.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,g,t)),o&&Es(o,s,i,!0);else{ze(r)&&(r=r(c));var b=(t||"0").split(" "),y,ue,$,D;E=Qe(r,c)||Y,y=At(E)||{},(!y||!y.left&&!y.top)&&dt(E).display==="none"&&(D=E.style.display,E.style.display="block",y=At(E),D?E.style.display=D:E.style.removeProperty("display")),ue=Ts(b[0],y[i.d]),$=Ts(b[1]||"0",s),t=y[i.p]-f[i.p]-v+ue+n-$,o&&Es(o,$,i,s-$<20||o._isStart&&$>20),s-=s-$}if(m&&(c[m]=t||-.001,t<0&&(t=0)),a){var q=t+s,ee=a._isStart;C="scroll"+i.d2,Es(a,q,i,ee&&q>20||!ee&&(p?Math.max(Y[C],it[C]):a.parentNode[C])<=q+1),p&&(f=At(o),p&&(a.style[i.op.p]=f[i.op.p]-i.op.m-a._offset+_e))}return u&&E&&(C=At(E),u.seek(g),R=At(E),u._caScrollDist=C[i.p]-R[i.p],t=t/u._caScrollDist*g),u&&u.seek(B),u?t:Math.round(t)},dc=/(webkit|moz|length|cssText|inset)/i,cn=function(t,r,s,i){if(t.parentNode!==r){var n=t.style,a,o;if(r===Y){t._stOrig=n.cssText,o=dt(t);for(a in o)!+a&&!dc.test(a)&&o[a]&&typeof n[a]=="string"&&a!=="0"&&(n[a]=o[a]);n.top=s,n.left=i}else n.cssText=t._stOrig;T.core.getCache(t).uncache=1,r.appendChild(t)}},ca=function(t,r,s){var i=r,n=i;return function(a){var o=Math.round(t());return o!==i&&o!==n&&Math.abs(o-i)>3&&Math.abs(o-n)>3&&(a=o,s&&s()),n=i,i=Math.round(a),i}},bs=function(t,r,s){var i={};i[r.p]="+="+s,T.set(t,i)},un=function(t,r){var s=Zt(t,r),i="_scroll"+r.p2,n=function a(o,c,f,v,p){var g=a.tween,u=c.onComplete,m={};f=f||s();var B=ca(s,f,function(){g.kill(),a.tween=0});return p=v&&p||0,v=v||o-f,g&&g.kill(),c[i]=o,c.inherit=!1,c.modifiers=m,m[i]=function(){return B(f+v*g.ratio+p*g.ratio*g.ratio)},c.onUpdate=function(){O.cache++,a.tween&&kt()},c.onComplete=function(){a.tween=0,u&&u.call(g)},g=a.tween=T.to(t,c),g};return t[i]=s,s.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},we(t,"wheel",s.wheelHandler),H.isTouch&&we(t,"touchmove",s.wheelHandler),n},H=(function(){function e(r,s){Sr||e.register(T)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ai(this),this.init(r,s)}var t=e.prototype;return t.init=function(s,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Or){this.update=this.refresh=this.kill=Tt;return}s=rn(st(s)||Fr(s)||s.nodeType?{trigger:s}:s,vs);var n=s,a=n.onUpdate,o=n.toggleClass,c=n.id,f=n.onToggle,v=n.onRefresh,p=n.scrub,g=n.trigger,u=n.pin,m=n.pinSpacing,B=n.invalidateOnRefresh,C=n.anticipatePin,R=n.onScrubComplete,E=n.onSnapComplete,b=n.once,y=n.snap,ue=n.pinReparent,$=n.pinSpacer,D=n.containerAnimation,q=n.fastScrollEnd,ee=n.preventOverlaps,S=s.horizontal||s.containerAnimation&&s.horizontal!==!1?Ke:be,Q=!p&&p!==0,w=Qe(s.scroller||N),at=T.core.getCache(w),ne=hr(w),me=("pinType"in s?s.pinType:$t(w,"pinType")||ne&&"fixed")==="fixed",He=[s.onEnter,s.onLeave,s.onEnterBack,s.onLeaveBack],K=Q&&s.toggleActions.split(" "),de="markers"in s?s.markers:vs.markers,he=ne?0:parseFloat(dt(w)["border"+S.p2+Rr])||0,l=this,ve=s.onRefreshInit&&function(){return s.onRefreshInit(l)},Jt=tc(w,ne,S),Ot=rc(w,ne),ot=0,Mt=0,Be=0,fe=Zt(w,S),Le,Ae,zt,Ge,je,j,ae,Ze,Je,h,et,Pt,Ft,se,Rt,Ht,er,ye,Lt,oe,pt,lt,Dt,Cr,pe,rs,Ct,gr,mr,Gt,tr,z,rr,gt,mt,vt,sr,vr,Bt;if(l._startClamp=l._endClamp=!1,l._dir=S,C*=45,l.scroller=w,l.scroll=D?D.time.bind(D):fe,Ge=fe(),l.vars=s,i=i||s.animation,"refreshPriority"in s&&(Yn=1,s.refreshPriority===-9999&&(Qr=l)),at.tweenScroll=at.tweenScroll||{top:un(w,be),left:un(w,Ke)},l.tweenTo=Le=at.tweenScroll[S.p],l.scrubDuration=function(x){rr=Fr(x)&&x,rr?z?z.duration(x):z=T.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:rr,paused:!0,onComplete:function(){return R&&R(l)}}):(z&&z.progress(1).kill(),z=0)},i&&(i.vars.lazy=!1,i._initted&&!l.isReverted||i.vars.immediateRender!==!1&&s.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),l.animation=i.pause(),i.scrollTrigger=l,l.scrubDuration(p),Gt=0,c||(c=i.vars.id)),y&&((!or(y)||y.push)&&(y={snapTo:y}),"scrollBehavior"in Y.style&&T.set(ne?[Y,it]:w,{scrollBehavior:"auto"}),O.forEach(function(x){return ze(x)&&x.target===(ne?J.scrollingElement||it:w)&&(x.smooth=!1)}),zt=ze(y.snapTo)?y.snapTo:y.snapTo==="labels"?ic(i):y.snapTo==="labelsDirectional"?nc(i):y.directional!==!1?function(x,A){return Ti(y.snapTo)(x,Oe()-Mt<500?0:A.direction)}:T.utils.snap(y.snapTo),gt=y.duration||{min:.1,max:2},gt=or(gt)?Xr(gt.min,gt.max):Xr(gt,gt),mt=T.delayedCall(y.delay||rr/2||.1,function(){var x=fe(),A=Oe()-Mt<500,M=Le.tween;if((A||Math.abs(l.getVelocity())<10)&&!M&&!Is&&ot!==x){var U=(x-j)/se,Te=i&&!Q?i.totalProgress():U,G=A?0:(Te-tr)/(Oe()-Nr)*1e3||0,le=T.utils.clamp(-U,1-U,_r(G/2)*G/.185),Ue=U+(y.inertia===!1?0:le),ie,te,Z=y,xt=Z.onStart,re=Z.onInterrupt,tt=Z.onComplete;if(ie=zt(Ue,l),Fr(ie)||(ie=Ue),te=Math.max(0,Math.round(j+ie*se)),x<=ae&&x>=j&&te!==x){if(M&&!M._initted&&M.data<=_r(te-x))return;y.inertia===!1&&(le=ie-U),Le(te,{duration:gt(_r(Math.max(_r(Ue-Te),_r(ie-Te))*.185/G/.05||0)),ease:y.ease||"power3",data:_r(te-x),onInterrupt:function(){return mt.restart(!0)&&re&&re(l)},onComplete:function(){l.update(),ot=fe(),i&&!Q&&(z?z.resetTo("totalProgress",ie,i._tTime/i._tDur):i.progress(ie)),Gt=tr=i&&!Q?i.totalProgress():l.progress,E&&E(l),tt&&tt(l)}},x,le*se,te-x-le*se),xt&&xt(l,Le.tween)}}else l.isActive&&ot!==x&&mt.restart(!0)}).pause()),c&&(li[c]=l),g=l.trigger=Qe(g||u!==!0&&u),Bt=g&&g._gsap&&g._gsap.stRevert,Bt&&(Bt=Bt(l)),u=u===!0?g:Qe(u),st(o)&&(o={targets:g,className:o}),u&&(m===!1||m===ut||(m=!m&&u.parentNode&&u.parentNode.style&&dt(u.parentNode).display==="flex"?!1:ge),l.pin=u,Ae=T.core.getCache(u),Ae.spacer?Rt=Ae.pinState:($&&($=Qe($),$&&!$.nodeType&&($=$.current||$.nativeElement),Ae.spacerIsNative=!!$,$&&(Ae.spacerState=_s($))),Ae.spacer=ye=$||J.createElement("div"),ye.classList.add("pin-spacer"),c&&ye.classList.add("pin-spacer-"+c),Ae.pinState=Rt=_s(u)),s.force3D!==!1&&T.set(u,{force3D:!0}),l.spacer=ye=Ae.spacer,mr=dt(u),Cr=mr[m+S.os2],oe=T.getProperty(u),pt=T.quickSetter(u,S.a,_e),Ks(u,ye,mr),er=_s(u)),de){Pt=or(de)?rn(de,sn):sn,h=xs("scroller-start",c,w,S,Pt,0),et=xs("scroller-end",c,w,S,Pt,0,h),Lt=h["offset"+S.op.d2];var Br=Qe($t(w,"content")||w);Ze=this.markerStart=xs("start",c,Br,S,Pt,Lt,0,D),Je=this.markerEnd=xs("end",c,Br,S,Pt,Lt,0,D),D&&(vr=T.quickSetter([Ze,Je],S.a,_e)),!me&&!(wt.length&&$t(w,"fixedMarkers")===!0)&&(sc(ne?Y:w),T.set([h,et],{force3D:!0}),rs=T.quickSetter(h,S.a,_e),gr=T.quickSetter(et,S.a,_e))}if(D){var k=D.vars.onUpdate,P=D.vars.onUpdateParams;D.eventCallback("onUpdate",function(){l.update(0,0,1),k&&k.apply(D,P||[])})}if(l.previous=function(){return I[I.indexOf(l)-1]},l.next=function(){return I[I.indexOf(l)+1]},l.revert=function(x,A){if(!A)return l.kill(!0);var M=x!==!1||!l.enabled,U=Ne;M!==l.isReverted&&(M&&(vt=Math.max(fe(),l.scroll.rec||0),Be=l.progress,sr=i&&i.progress()),Ze&&[Ze,Je,h,et].forEach(function(Te){return Te.style.display=M?"none":"block"}),M&&(Ne=l,l.update(M)),u&&(!ue||!l.isActive)&&(M?lc(u,ye,Rt):Ks(u,ye,dt(u),pe)),M||l.update(M),Ne=U,l.isReverted=M)},l.refresh=function(x,A,M,U){if(!((Ne||!l.enabled)&&!A)){if(u&&x&&ht){we(e,"scrollEnd",ia);return}!$e&&ve&&ve(l),Ne=l,Le.tween&&!M&&(Le.tween.kill(),Le.tween=0),z&&z.pause(),B&&i&&(i.revert({kill:!1}).invalidate(),i.getChildren?i.getChildren(!0,!0,!1).forEach(function(jt){return jt.vars.immediateRender&&jt.render(0,!0,!0)}):i.vars.immediateRender&&i.render(0,!0,!0)),l.isReverted||l.revert(!0,!0),l._subPinOffset=!1;var Te=Jt(),G=Ot(),le=D?D.duration():Et(w,S),Ue=se<=.01||!se,ie=0,te=U||0,Z=or(M)?M.end:s.end,xt=s.endTrigger||g,re=or(M)?M.start:s.start||(s.start===0||!g?0:u?"0 0":"0 100%"),tt=l.pinnedContainer=s.pinnedContainer&&Qe(s.pinnedContainer,l),bt=g&&Math.max(0,I.indexOf(l))||0,Re=bt,De,ke,ir,ss,Ie,xe,St,Ns,wi,Ar,yt,Ur,is;for(de&&or(M)&&(Ur=T.getProperty(h,S.p),is=T.getProperty(et,S.p));Re-- >0;)xe=I[Re],xe.end||xe.refresh(0,1)||(Ne=l),St=xe.pin,St&&(St===g||St===u||St===tt)&&!xe.isReverted&&(Ar||(Ar=[]),Ar.unshift(xe),xe.revert(!0,!0)),xe!==I[Re]&&(bt--,Re--);for(ze(re)&&(re=re(l)),re=Qi(re,"start",l),j=ln(re,g,Te,S,fe(),Ze,h,l,G,he,me,le,D,l._startClamp&&"_startClamp")||(u?-.001:0),ze(Z)&&(Z=Z(l)),st(Z)&&!Z.indexOf("+=")&&(~Z.indexOf(" ")?Z=(st(re)?re.split(" ")[0]:"")+Z:(ie=Ts(Z.substr(2),Te),Z=st(re)?re:(D?T.utils.mapRange(0,D.duration(),D.scrollTrigger.start,D.scrollTrigger.end,j):j)+ie,xt=g)),Z=Qi(Z,"end",l),ae=Math.max(j,ln(Z||(xt?"100% 0":le),xt,Te,S,fe()+ie,Je,et,l,G,he,me,le,D,l._endClamp&&"_endClamp"))||-.001,ie=0,Re=bt;Re--;)xe=I[Re]||{},St=xe.pin,St&&xe.start-xe._pinPush<=j&&!D&&xe.end>0&&(De=xe.end-(l._startClamp?Math.max(0,xe.start):xe.start),(St===g&&xe.start-xe._pinPush<j||St===tt)&&isNaN(re)&&(ie+=De*(1-xe.progress)),St===u&&(te+=De));if(j+=ie,ae+=ie,l._startClamp&&(l._startClamp+=ie),l._endClamp&&!$e&&(l._endClamp=ae||-.001,ae=Math.min(ae,Et(w,S))),se=ae-j||(j-=.01)&&.001,Ue&&(Be=T.utils.clamp(0,1,T.utils.normalize(j,ae,vt))),l._pinPush=te,Ze&&ie&&(De={},De[S.a]="+="+ie,tt&&(De[S.p]="-="+fe()),T.set([Ze,Je],De)),u&&!(oi&&l.end>=Et(w,S)))De=dt(u),ss=S===be,ir=fe(),lt=parseFloat(oe(S.a))+te,!le&&ae>1&&(yt=(ne?J.scrollingElement||it:w).style,yt={style:yt,value:yt["overflow"+S.a.toUpperCase()]},ne&&dt(Y)["overflow"+S.a.toUpperCase()]!=="scroll"&&(yt.style["overflow"+S.a.toUpperCase()]="scroll")),Ks(u,ye,De),er=_s(u),ke=At(u,!0),Ns=me&&Zt(w,ss?Ke:be)(),m?(pe=[m+S.os2,se+te+_e],pe.t=ye,Re=m===ge?Bs(u,S)+se+te:0,Re&&(pe.push(S.d,Re+_e),ye.style.flexBasis!=="auto"&&(ye.style.flexBasis=Re+_e)),Mr(pe),tt&&I.forEach(function(jt){jt.pin===tt&&jt.vars.pinSpacing!==!1&&(jt._subPinOffset=!0)}),me&&fe(vt)):(Re=Bs(u,S),Re&&ye.style.flexBasis!=="auto"&&(ye.style.flexBasis=Re+_e)),me&&(Ie={top:ke.top+(ss?ir-j:Ns)+_e,left:ke.left+(ss?Ns:ir-j)+_e,boxSizing:"border-box",position:"fixed"},Ie[cr]=Ie["max"+Rr]=Math.ceil(ke.width)+_e,Ie[ur]=Ie["max"+yi]=Math.ceil(ke.height)+_e,Ie[ut]=Ie[ut+Kr]=Ie[ut+qr]=Ie[ut+Zr]=Ie[ut+$r]="0",Ie[ge]=De[ge],Ie[ge+Kr]=De[ge+Kr],Ie[ge+qr]=De[ge+qr],Ie[ge+Zr]=De[ge+Zr],Ie[ge+$r]=De[ge+$r],Ht=uc(Rt,Ie,ue),$e&&fe(0)),i?(wi=i._initted,Ws(1),i.render(i.duration(),!0,!0),Dt=oe(S.a)-lt+se+te,Ct=Math.abs(se-Dt)>1,me&&Ct&&Ht.splice(Ht.length-2,2),i.render(0,!0,!0),wi||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),Ws(0)):Dt=se,yt&&(yt.value?yt.style["overflow"+S.a.toUpperCase()]=yt.value:yt.style.removeProperty("overflow-"+S.a));else if(g&&fe()&&!D)for(ke=g.parentNode;ke&&ke!==Y;)ke._pinOffset&&(j-=ke._pinOffset,ae-=ke._pinOffset),ke=ke.parentNode;Ar&&Ar.forEach(function(jt){return jt.revert(!1,!0)}),l.start=j,l.end=ae,Ge=je=$e?vt:fe(),!D&&!$e&&(Ge<vt&&fe(vt),l.scroll.rec=0),l.revert(!1,!0),Mt=Oe(),mt&&(ot=-1,mt.restart(!0)),Ne=0,i&&Q&&(i._initted||sr)&&i.progress()!==sr&&i.progress(sr||0,!0).render(i.time(),!0,!0),(Ue||Be!==l.progress||D||B||i&&!i._initted)&&(i&&!Q&&(i._initted||Be||i.vars.immediateRender!==!1)&&i.totalProgress(D&&j<-.001&&!Be?T.utils.normalize(j,ae,0):Be,!0),l.progress=Ue||(Ge-j)/se===Be?0:Be),u&&m&&(ye._pinOffset=Math.round(l.progress*Dt)),z&&z.invalidate(),isNaN(Ur)||(Ur-=T.getProperty(h,S.p),is-=T.getProperty(et,S.p),bs(h,S,Ur),bs(Ze,S,Ur-(U||0)),bs(et,S,is),bs(Je,S,is-(U||0))),Ue&&!$e&&l.update(),v&&!$e&&!Ft&&(Ft=!0,v(l),Ft=!1)}},l.getVelocity=function(){return(fe()-je)/(Oe()-Nr)*1e3||0},l.endAnimation=function(){Ir(l.callbackAnimation),i&&(z?z.progress(1):i.paused()?Q||Ir(i,l.direction<0,1):Ir(i,i.reversed()))},l.labelToScroll=function(x){return i&&i.labels&&(j||l.refresh()||j)+i.labels[x]/i.duration()*se||0},l.getTrailing=function(x){var A=I.indexOf(l),M=l.direction>0?I.slice(0,A).reverse():I.slice(A+1);return(st(x)?M.filter(function(U){return U.vars.preventOverlaps===x}):M).filter(function(U){return l.direction>0?U.end<=j:U.start>=ae})},l.update=function(x,A,M){if(!(D&&!M&&!x)){var U=$e===!0?vt:l.scroll(),Te=x?0:(U-j)/se,G=Te<0?0:Te>1?1:Te||0,le=l.progress,Ue,ie,te,Z,xt,re,tt,bt;if(A&&(je=Ge,Ge=D?fe():U,y&&(tr=Gt,Gt=i&&!Q?i.totalProgress():G)),C&&u&&!Ne&&!fs&&ht&&(!G&&j<U+(U-je)/(Oe()-Nr)*C?G=1e-4:G===1&&ae>U+(U-je)/(Oe()-Nr)*C&&(G=.9999)),G!==le&&l.enabled){if(Ue=l.isActive=!!G&&G<1,ie=!!le&&le<1,re=Ue!==ie,xt=re||!!G!=!!le,l.direction=G>le?1:-1,l.progress=G,xt&&!Ne&&(te=G&&!le?0:G===1?1:le===1?2:3,Q&&(Z=!re&&K[te+1]!=="none"&&K[te+1]||K[te],bt=i&&(Z==="complete"||Z==="reset"||Z in i))),ee&&(re||bt)&&(bt||p||!i)&&(ze(ee)?ee(l):l.getTrailing(ee).forEach(function(ir){return ir.endAnimation()})),Q||(z&&!Ne&&!fs?(z._dp._time-z._start!==z._time&&z.render(z._dp._time-z._start),z.resetTo?z.resetTo("totalProgress",G,i._tTime/i._tDur):(z.vars.totalProgress=G,z.invalidate().restart())):i&&i.totalProgress(G,!!(Ne&&(Mt||x)))),u){if(x&&m&&(ye.style[m+S.os2]=Cr),!me)pt(zr(lt+Dt*G));else if(xt){if(tt=!x&&G>le&&ae+1>U&&U+1>=Et(w,S),ue)if(!x&&(Ue||tt)){var Re=At(u,!0),De=U-j;cn(u,Y,Re.top+(S===be?De:0)+_e,Re.left+(S===be?0:De)+_e)}else cn(u,ye);Mr(Ue||tt?Ht:er),Ct&&G<1&&Ue||pt(lt+(G===1&&!tt?Dt:0))}}y&&!Le.tween&&!Ne&&!fs&&mt.restart(!0),o&&(re||b&&G&&(G<1||!Xs))&&es(o.targets).forEach(function(ir){return ir.classList[Ue||b?"add":"remove"](o.className)}),a&&!Q&&!x&&a(l),xt&&!Ne?(Q&&(bt&&(Z==="complete"?i.pause().totalProgress(1):Z==="reset"?i.restart(!0).pause():Z==="restart"?i.restart(!0):i[Z]()),a&&a(l)),(re||!Xs)&&(f&&re&&qs(l,f),He[te]&&qs(l,He[te]),b&&(G===1?l.kill(!1,1):He[te]=0),re||(te=G===1?1:3,He[te]&&qs(l,He[te]))),q&&!Ue&&Math.abs(l.getVelocity())>(Fr(q)?q:2500)&&(Ir(l.callbackAnimation),z?z.progress(1):Ir(i,Z==="reverse"?1:!G,1))):Q&&a&&!Ne&&a(l)}if(gr){var ke=D?U/D.duration()*(D._caScrollDist||0):U;rs(ke+(h._isFlipped?1:0)),gr(ke)}vr&&vr(-U/D.duration()*(D._caScrollDist||0))}},l.enable=function(x,A){l.enabled||(l.enabled=!0,we(w,"resize",Hr),ne||we(w,"scroll",br),ve&&we(e,"refreshInit",ve),x!==!1&&(l.progress=Be=0,Ge=je=ot=fe()),A!==!1&&l.refresh())},l.getTween=function(x){return x&&Le?Le.tween:z},l.setPositions=function(x,A,M,U){if(D){var Te=D.scrollTrigger,G=D.duration(),le=Te.end-Te.start;x=Te.start+le*x/G,A=Te.start+le*A/G}l.refresh(!1,!1,{start:Ji(x,M&&!!l._startClamp),end:Ji(A,M&&!!l._endClamp)},U),l.update()},l.adjustPinSpacing=function(x){if(pe&&x){var A=pe.indexOf(S.d)+1;pe[A]=parseFloat(pe[A])+x+_e,pe[1]=parseFloat(pe[1])+x+_e,Mr(pe)}},l.disable=function(x,A){if(x!==!1&&l.revert(!0,!0),l.enabled&&(l.enabled=l.isActive=!1,A||z&&z.pause(),vt=0,Ae&&(Ae.uncache=1),ve&&Ee(e,"refreshInit",ve),mt&&(mt.pause(),Le.tween&&Le.tween.kill()&&(Le.tween=0)),!ne)){for(var M=I.length;M--;)if(I[M].scroller===w&&I[M]!==l)return;Ee(w,"resize",Hr),ne||Ee(w,"scroll",br)}},l.kill=function(x,A){l.disable(x,A),z&&!A&&z.kill(),c&&delete li[c];var M=I.indexOf(l);M>=0&&I.splice(M,1),M===qe&&ws>0&&qe--,M=0,I.forEach(function(U){return U.scroller===l.scroller&&(M=1)}),M||$e||(l.scroll.rec=0),i&&(i.scrollTrigger=null,x&&i.revert({kill:!1}),A||i.kill()),Ze&&[Ze,Je,h,et].forEach(function(U){return U.parentNode&&U.parentNode.removeChild(U)}),Qr===l&&(Qr=0),u&&(Ae&&(Ae.uncache=1),M=0,I.forEach(function(U){return U.pin===u&&M++}),M||(Ae.spacer=0)),s.onKill&&s.onKill(l)},I.push(l),l.enable(!1,!1),Bt&&Bt(l),i&&i.add&&!se){var W=l.update;l.update=function(){l.update=W,O.cache++,j||ae||l.refresh()},T.delayedCall(.01,l.update),se=.01,j=ae=0}else l.refresh();u&&oc()},e.register=function(s){return Sr||(T=s||Qn(),Zn()&&window.document&&e.enable(),Sr=Or),Sr},e.defaults=function(s){if(s)for(var i in s)vs[i]=s[i];return vs},e.disable=function(s,i){Or=0,I.forEach(function(a){return a[i?"kill":"disable"](s)}),Ee(N,"wheel",br),Ee(J,"scroll",br),clearInterval(hs),Ee(J,"touchcancel",Tt),Ee(Y,"touchstart",Tt),gs(Ee,J,"pointerdown,touchstart,mousedown",en),gs(Ee,J,"pointerup,touchend,mouseup",tn),Cs.kill(),ps(Ee);for(var n=0;n<O.length;n+=3)ms(Ee,O[n],O[n+1]),ms(Ee,O[n],O[n+2])},e.enable=function(){if(N=window,J=document,it=J.documentElement,Y=J.body,T&&(es=T.utils.toArray,Xr=T.utils.clamp,ai=T.core.context||Tt,Ws=T.core.suppressOverwrites||Tt,xi=N.history.scrollRestoration||"auto",ci=N.pageYOffset||0,T.core.globals("ScrollTrigger",e),Y)){Or=1,wr=document.createElement("div"),wr.style.height="100vh",wr.style.position="absolute",la(),ec(),ce.register(T),e.isTouch=ce.isTouch,Wt=ce.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ni=ce.isTouch===1,we(N,"wheel",br),vi=[N,J,it,Y],T.matchMedia?(e.matchMedia=function(f){var v=T.matchMedia(),p;for(p in f)v.add(p,f[p]);return v},T.addEventListener("matchMediaInit",function(){aa(),Ei()}),T.addEventListener("matchMediaRevert",function(){return na()}),T.addEventListener("matchMedia",function(){lr(0,1),pr("matchMedia")}),T.matchMedia().add("(orientation: portrait)",function(){return $s(),$s})):console.warn("Requires GSAP 3.11.0 or later"),$s(),we(J,"scroll",br);var s=Y.hasAttribute("style"),i=Y.style,n=i.borderTopStyle,a=T.core.Animation.prototype,o,c;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",o=At(Y),be.m=Math.round(o.top+be.sc())||0,Ke.m=Math.round(o.left+Ke.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),s||(Y.setAttribute("style",""),Y.removeAttribute("style")),hs=setInterval(nn,250),T.delayedCall(.5,function(){return fs=0}),we(J,"touchcancel",Tt),we(Y,"touchstart",Tt),gs(we,J,"pointerdown,touchstart,mousedown",en),gs(we,J,"pointerup,touchend,mouseup",tn),ii=T.utils.checkPrefix("transform"),Ms.push(ii),Sr=Oe(),Cs=T.delayedCall(.2,lr).pause(),yr=[J,"visibilitychange",function(){var f=N.innerWidth,v=N.innerHeight;J.hidden?(Ki=f,Zi=v):(Ki!==f||Zi!==v)&&Hr()},J,"DOMContentLoaded",lr,N,"load",lr,N,"resize",Hr],ps(we),I.forEach(function(f){return f.enable(0,1)}),c=0;c<O.length;c+=3)ms(Ee,O[c],O[c+1]),ms(Ee,O[c],O[c+2])}},e.config=function(s){"limitCallbacks"in s&&(Xs=!!s.limitCallbacks);var i=s.syncInterval;i&&clearInterval(hs)||(hs=i)&&setInterval(nn,i),"ignoreMobileResize"in s&&(ni=e.isTouch===1&&s.ignoreMobileResize),"autoRefreshEvents"in s&&(ps(Ee)||ps(we,s.autoRefreshEvents||"none"),qn=(s.autoRefreshEvents+"").indexOf("resize")===-1)},e.scrollerProxy=function(s,i){var n=Qe(s),a=O.indexOf(n),o=hr(n);~a&&O.splice(a,o?6:2),i&&(o?wt.unshift(N,i,Y,i,it,i):wt.unshift(n,i))},e.clearMatchMedia=function(s){I.forEach(function(i){return i._ctx&&i._ctx.query===s&&i._ctx.kill(!0,!0)})},e.isInViewport=function(s,i,n){var a=(st(s)?Qe(s):s).getBoundingClientRect(),o=a[n?cr:ur]*i||0;return n?a.right-o>0&&a.left+o<N.innerWidth:a.bottom-o>0&&a.top+o<N.innerHeight},e.positionInViewport=function(s,i,n){st(s)&&(s=Qe(s));var a=s.getBoundingClientRect(),o=a[n?cr:ur],c=i==null?o/2:i in As?As[i]*o:~i.indexOf("%")?parseFloat(i)*o/100:parseFloat(i)||0;return n?(a.left+c)/N.innerWidth:(a.top+c)/N.innerHeight},e.killAll=function(s){if(I.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),s!==!0){var i=fr.killAll||[];fr={},i.forEach(function(n){return n()})}},e})();H.version="3.14.2";H.saveStyles=function(e){return e?es(e).forEach(function(t){if(t&&t.style){var r=rt.indexOf(t);r>=0&&rt.splice(r,5),rt.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),T.core.getCache(t),ai())}}):rt};H.revert=function(e,t){return Ei(!e,t)};H.create=function(e,t){return new H(e,t)};H.refresh=function(e){return e?Hr(!0):(Sr||H.register())&&lr(!0)};H.update=function(e){return++O.cache&&kt(e===!0?2:0)};H.clearScrollMemory=oa;H.maxScroll=function(e,t){return Et(e,t?Ke:be)};H.getScrollFunc=function(e,t){return Zt(Qe(e),t?Ke:be)};H.getById=function(e){return li[e]};H.getAll=function(){return I.filter(function(e){return e.vars.id!=="ScrollSmoother"})};H.isScrolling=function(){return!!ht};H.snapDirectional=Ti;H.addEventListener=function(e,t){var r=fr[e]||(fr[e]=[]);~r.indexOf(t)||r.push(t)};H.removeEventListener=function(e,t){var r=fr[e],s=r&&r.indexOf(t);s>=0&&r.splice(s,1)};H.batch=function(e,t){var r=[],s={},i=t.interval||.016,n=t.batchMax||1e9,a=function(f,v){var p=[],g=[],u=T.delayedCall(i,function(){v(p,g),p=[],g=[]}).pause();return function(m){p.length||u.restart(!0),p.push(m.trigger),g.push(m),n<=p.length&&u.progress(1)}},o;for(o in t)s[o]=o.substr(0,2)==="on"&&ze(t[o])&&o!=="onRefreshInit"?a(o,t[o]):t[o];return ze(n)&&(n=n(),we(H,"refresh",function(){return n=t.batchMax()})),es(e).forEach(function(c){var f={};for(o in s)f[o]=s[o];f.trigger=c,r.push(H.create(f))}),r};var dn=function(t,r,s,i){return r>i?t(i):r<0&&t(0),s>i?(i-r)/(s-r):s<0?r/(r-s):1},Zs=function e(t,r){r===!0?t.style.removeProperty("touch-action"):t.style.touchAction=r===!0?"auto":r?"pan-"+r+(ce.isTouch?" pinch-zoom":""):"none",t===it&&e(Y,r)},Ss={auto:1,scroll:1},hc=function(t){var r=t.event,s=t.target,i=t.axis,n=(r.changedTouches?r.changedTouches[0]:r).target,a=n._gsap||T.core.getCache(n),o=Oe(),c;if(!a._isScrollT||o-a._isScrollT>2e3){for(;n&&n!==Y&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(Ss[(c=dt(n)).overflowY]||Ss[c.overflowX]));)n=n.parentNode;a._isScroll=n&&n!==s&&!hr(n)&&(Ss[(c=dt(n)).overflowY]||Ss[c.overflowX]),a._isScrollT=o}(a._isScroll||i==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},ua=function(t,r,s,i){return ce.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:i=i&&hc,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return s&&we(J,ce.eventTypes[0],fn,!1,!0)},onDisable:function(){return Ee(J,ce.eventTypes[0],fn,!0)}})},fc=/(input|label|select|textarea)/i,hn,fn=function(t){var r=fc.test(t.target.tagName);(r||hn)&&(t._gsapAllow=!0,hn=r)},pc=function(t){or(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var r=t,s=r.normalizeScrollX,i=r.momentum,n=r.allowNestedScroll,a=r.onRelease,o,c,f=Qe(t.target)||it,v=T.core.globals().ScrollSmoother,p=v&&v.get(),g=Wt&&(t.content&&Qe(t.content)||p&&t.content!==!1&&!p.smooth()&&p.content()),u=Zt(f,be),m=Zt(f,Ke),B=1,C=(ce.isTouch&&N.visualViewport?N.visualViewport.scale*N.visualViewport.width:N.outerWidth)/N.innerWidth,R=0,E=ze(i)?function(){return i(o)}:function(){return i||2.8},b,y,ue=ua(f,t.type,!0,n),$=function(){return y=!1},D=Tt,q=Tt,ee=function(){c=Et(f,be),q=Xr(Wt?1:0,c),s&&(D=Xr(0,Et(f,Ke))),b=dr},S=function(){g._gsap.y=zr(parseFloat(g._gsap.y)+u.offset)+"px",g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(g._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},Q=function(){if(y){requestAnimationFrame($);var de=zr(o.deltaY/2),he=q(u.v-de);if(g&&he!==u.v+u.offset){u.offset=he-u.v;var l=zr((parseFloat(g&&g._gsap.y)||0)-u.offset);g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+l+", 0, 1)",g._gsap.y=l+"px",u.cacheID=O.cache,kt()}return!0}u.offset&&S(),y=!0},w,at,ne,me,He=function(){ee(),w.isActive()&&w.vars.scrollY>c&&(u()>c?w.progress(1)&&u(c):w.resetTo("scrollY",c))};return g&&T.set(g,{y:"+=0"}),t.ignoreCheck=function(K){return Wt&&K.type==="touchmove"&&Q()||B>1.05&&K.type!=="touchstart"||o.isGesturing||K.touches&&K.touches.length>1},t.onPress=function(){y=!1;var K=B;B=zr((N.visualViewport&&N.visualViewport.scale||1)/C),w.pause(),K!==B&&Zs(f,B>1.01?!0:s?!1:"x"),at=m(),ne=u(),ee(),b=dr},t.onRelease=t.onGestureStart=function(K,de){if(u.offset&&S(),!de)me.restart(!0);else{O.cache++;var he=E(),l,ve;s&&(l=m(),ve=l+he*.05*-K.velocityX/.227,he*=dn(m,l,ve,Et(f,Ke)),w.vars.scrollX=D(ve)),l=u(),ve=l+he*.05*-K.velocityY/.227,he*=dn(u,l,ve,Et(f,be)),w.vars.scrollY=q(ve),w.invalidate().duration(he).play(.01),(Wt&&w.vars.scrollY>=c||l>=c-1)&&T.to({},{onUpdate:He,duration:he})}a&&a(K)},t.onWheel=function(){w._ts&&w.pause(),Oe()-R>1e3&&(b=0,R=Oe())},t.onChange=function(K,de,he,l,ve){if(dr!==b&&ee(),de&&s&&m(D(l[2]===de?at+(K.startX-K.x):m()+de-l[1])),he){u.offset&&S();var Jt=ve[2]===he,Ot=Jt?ne+K.startY-K.y:u()+he-ve[1],ot=q(Ot);Jt&&Ot!==ot&&(ne+=ot-Ot),u(ot)}(he||de)&&kt()},t.onEnable=function(){Zs(f,s?!1:"x"),H.addEventListener("refresh",He),we(N,"resize",He),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=m.smooth=!1),ue.enable()},t.onDisable=function(){Zs(f,!0),Ee(N,"resize",He),H.removeEventListener("refresh",He),ue.kill()},t.lockAxis=t.lockAxis!==!1,o=new ce(t),o.iOS=Wt,Wt&&!u()&&u(1),Wt&&T.ticker.add(Tt),me=o._dc,w=T.to(o,{ease:"power4",paused:!0,inherit:!1,scrollX:s?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ca(u,u(),function(){return w.pause()})},onUpdate:kt,onComplete:me.vars.onComplete}),o};H.sort=function(e){if(ze(e))return I.sort(e);var t=N.pageYOffset||0;return H.getAll().forEach(function(r){return r._sortY=r.trigger?t+r.trigger.getBoundingClientRect().top:r.start+N.innerHeight}),I.sort(e||function(r,s){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((s.vars.containerAnimation?1e6:s._sortY)+(s.vars.refreshPriority||0)*-1e6)})};H.observe=function(e){return new ce(e)};H.normalizeScroll=function(e){if(typeof e>"u")return Ye;if(e===!0&&Ye)return Ye.enable();if(e===!1){Ye&&Ye.kill(),Ye=e;return}var t=e instanceof ce?e:pc(e);return Ye&&Ye.target===t.target&&Ye.kill(),hr(t.target)&&(Ye=t),t};H.core={_getVelocityProp:si,_inputObserver:ua,_scrollers:O,_proxies:wt,bridge:{ss:function(){ht||pr("scrollStart"),ht=Oe()},ref:function(){return Ne}}};Qn()&&T.registerPlugin(H);Jr.registerPlugin(H);const gc=()=>{const e=_.useRef(null),t=_.useRef([]);return ks(()=>{t.current.forEach((r,s)=>{const i=r.querySelector(".counter-number"),n=Ci[s];Jr.set(i,{innerText:"0"}),Jr.to(i,{innerText:n.value,duration:2.5,ease:"power2.out",snap:{innerText:1},scrollTrigger:{trigger:"#counter",start:"top center"},onComplete:()=>{i.textContent=`${n.value}${n.suffix}`}})},e)},[]),d.jsx("div",{id:"counter",ref:e,className:"padding-x-lg xl:mt-0 mt-32",children:d.jsx("div",{className:"mx-auto grid-4-cols",children:Ci.map((r,s)=>d.jsxs("div",{ref:i=>i&&(t.current[s]=i),className:"bg-zinc-900 rounded-lg p-10 flex flex-col justify-center",children:[d.jsxs("div",{className:"counter-number text-white-50 text-5xl font-bold mb-2",children:["0 ",r.suffix]}),d.jsx("div",{className:"text-white-50 text-lg",children:r.label})]},s))})})},da=_.memo(()=>{const e=_.useRef(null),[t,r]=_.useState(!0);return _.useEffect(()=>{const s=e.current;if(!s||typeof window>"u"||!("IntersectionObserver"in window))return;const i=new IntersectionObserver(([n])=>{r(n.isIntersecting)},{threshold:.1});return i.observe(s),()=>i.disconnect()},[]),ks(()=>{const s=Jr.fromTo(".hero-text h1",{y:50,opacity:0},{y:0,opacity:1,stagger:.3,duration:1,ease:"power2.inOut"});return()=>{s.kill()}},{dependencies:[]}),d.jsxs("section",{id:"hero",ref:e,className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 z-10",children:d.jsx("img",{src:"/images/bg.png",alt:"background",loading:"eager",decoding:"async",fetchPriority:"high"})}),d.jsxs("div",{className:"hero-layout",children:[d.jsx("header",{className:"flex flex-col justify-center md:w-full w-screen md:px-20 px-5",children:d.jsxs("div",{className:"flex flex-col gap-7",children:[d.jsxs("div",{className:"hero-text",children:[d.jsxs("h1",{children:["Shaping",d.jsx("span",{className:"slide",children:d.jsx("span",{className:"wrapper",children:Fa.map((s,i)=>d.jsxs("span",{className:"flex items-center md:gap-3 gap-1 pb-2",children:[d.jsx("img",{src:s.imgPath,alt:s.text,width:48,height:48,loading:"lazy",decoding:"async",className:"xl:size-12 md:size-10 size-7 md:p-2 p-1 rounded-full bg-white-50"}),d.jsx("span",{className:"text-purple-700",children:s.text})]},i))})})]}),d.jsx("h1",{children:"into Real Projects"}),d.jsx("h1",{children:"that Deliver Results"})]}),d.jsx("b",{children:d.jsx("p",{className:"bg-gradient-to-r from-white via-indigo-400 to-gray-400 text-transparent bg-clip-text md:text-xl relative z-10 pointer-events-none",children:"Hi, I’m Moiz Jawad, a Full-Stack Developer who builds real-world products"})}),d.jsx(Rn,{text:"See My Work",className:"md:w-80 md:h-16 w-60 h-12 z-10",id:"counter"})]})}),d.jsx("figure",{children:d.jsx("div",{className:"hero-3d-layout",children:d.jsx(zn,{isActive:t})})})]}),d.jsx(gc,{})]})});da.displayName="Hero";const ha=_.memo(()=>d.jsx("footer",{className:"footer",children:d.jsxs("div",{className:"footer-container",children:[d.jsx("div",{className:"flex flex-col justify-center",children:d.jsx("p",{children:"Terms & Conditions"})}),d.jsx("div",{className:"socials",children:Ha.map((e,t)=>d.jsx("div",{className:"icon",children:d.jsx("a",{href:e.link,children:d.jsx("img",{src:e.imgPath,alt:`${e.name} social icon`,loading:"lazy",decoding:"async"})})},t))}),d.jsx("div",{className:"flex flex-col justify-center",children:d.jsxs("p",{className:"text-center md:text-end",children:["© ",new Date().getFullYear()," Moiz Jawad. All rights reserved."]})})]})}));ha.displayName="Footer";class nr extends mn.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Error caught by boundary:",t,r)}render(){return this.state.hasError?d.jsx("div",{className:"flex-center min-h-screen p-5",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Something went wrong"}),d.jsx("p",{className:"text-white-50 mb-4",children:"Please refresh the page or try again later."}),d.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}const mc=_.lazy(()=>Dr(()=>import("./TechStack-B_2WPTzA.js"),__vite__mapDeps([0,1,2,3,4]))),vc=_.lazy(()=>Dr(()=>import("./ShowcaseSection-CZ741qfX.js"),__vite__mapDeps([5,1,2,3]))),xc=_.lazy(()=>Dr(()=>import("./LogoSection-D8_bQN3u.js"),__vite__mapDeps([6,1,2,3]))),_c=_.lazy(()=>Dr(()=>import("./FeatureCards-DAqLeaJ7.js"),__vite__mapDeps([7,1,2,3]))),bc=_.lazy(()=>Dr(()=>import("./ExperienceSection-C60U9O6A.js"),__vite__mapDeps([8,1,2,4,3]))),Sc=_.lazy(()=>Dr(()=>import("./Contact-DEkBZbjP.js"),__vite__mapDeps([9,1,2,4,3]))),yc=()=>d.jsxs(nr,{children:[d.jsx(Pn,{}),d.jsx(da,{}),d.jsxs(_.Suspense,{fallback:null,children:[d.jsx(nr,{children:d.jsx(vc,{})}),d.jsx(nr,{children:d.jsx(xc,{})}),d.jsx(nr,{children:d.jsx(_c,{})}),d.jsx(nr,{children:d.jsx(bc,{})}),d.jsx(nr,{children:d.jsx(mc,{})}),d.jsx(nr,{children:d.jsx(Sc,{})})]}),d.jsx(ha,{})]});xa.createRoot(document.getElementById("root")).render(d.jsx(yc,{}));export{H as S,Pc as a,Gl as d,Dc as e,Mc as l,Rc as t,ks as u,Bc as w};
